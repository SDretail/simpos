var Ru=Object.defineProperty,Tu=Object.defineProperties;var Pu=Object.getOwnPropertyDescriptors;var Rn=Object.getOwnPropertySymbols;var qi=Object.prototype.hasOwnProperty,Hi=Object.prototype.propertyIsEnumerable;var yt=(F,K)=>(K=Symbol[F])?K:Symbol.for("Symbol."+F),Du=F=>{throw TypeError(F)};var Li=(F,K,W)=>K in F?Ru(F,K,{enumerable:!0,configurable:!0,writable:!0,value:W}):F[K]=W,q=(F,K)=>{for(var W in K||(K={}))qi.call(K,W)&&Li(F,W,K[W]);if(Rn)for(var W of Rn(K))Hi.call(K,W)&&Li(F,W,K[W]);return F},Z=(F,K)=>Tu(F,Pu(K));var zi=(F,K)=>{var W={};for(var Q in F)qi.call(F,Q)&&K.indexOf(Q)<0&&(W[Q]=F[Q]);if(F!=null&&Rn)for(var Q of Rn(F))K.indexOf(Q)<0&&Hi.call(F,Q)&&(W[Q]=F[Q]);return W};var J=(F,K,W)=>new Promise((Q,ce)=>{var se=z=>{try{H(W.next(z))}catch(G){ce(G)}},U=z=>{try{H(W.throw(z))}catch(G){ce(G)}},H=z=>z.done?Q(z.value):Promise.resolve(z.value).then(se,U);H((W=W.apply(F,K)).next())}),nt=function(F,K){this[0]=F,this[1]=K},Ur=(F,K,W)=>{var Q=(U,H,z,G)=>{try{var De=W[U](H),Lt=(H=De.value)instanceof nt,fe=De.done;Promise.resolve(Lt?H[0]:H).then(he=>Lt?Q(U==="return"?U:"next",H[1]?{done:he.done,value:he.value}:he,z,G):z({value:he,done:fe})).catch(he=>Q("throw",he,z,G))}catch(he){G(he)}},ce=U=>se[U]=H=>new Promise((z,G)=>Q(U,H,z,G)),se={};return W=W.apply(F,K),se[yt("asyncIterator")]=()=>se,ce("next"),ce("throw"),ce("return"),se},Lr=F=>{var K=F[yt("asyncIterator")],W=!1,Q,ce={};return K==null?(K=F[yt("iterator")](),Q=se=>ce[se]=U=>K[se](U)):(K=K.call(F),Q=se=>ce[se]=U=>{if(W){if(W=!1,se==="throw")throw U;return U}return W=!0,{done:!1,value:new nt(new Promise(H=>{var z=K[se](U);z instanceof Object||Du("Object expected"),H(z)}),1)}}),ce[yt("iterator")]=()=>ce,Q("next"),"throw"in K?Q("throw"):ce.throw=se=>{throw se},"return"in K&&Q("return"),ce},Vi=(F,K,W)=>(K=F[yt("asyncIterator")])?K.call(F):(F=F[yt("iterator")](),K={},W=(Q,ce)=>(ce=F[Q])&&(K[Q]=se=>new Promise((U,H,z)=>(se=ce.call(F,se),z=se.done,Promise.resolve(se.value).then(G=>U({value:G,done:z}),H)))),W("next"),W("return"),K);(function(){"use strict";var F=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function K(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(F,function(){var n=1e3,r=6e4,s=36e5,i="millisecond",o="second",a="minute",u="hour",d="day",c="week",l="month",f="quarter",m="year",p="date",h="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,w=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(C){var R=["th","st","nd","rd"],E=C%100;return"["+C+(R[(E-20)%10]||R[E]||R[0])+"]"}},_=function(C,R,E){var T=String(C);return!T||T.length>=R?C:""+Array(R+1-T.length).join(E)+C},x={s:_,z:function(C){var R=-C.utcOffset(),E=Math.abs(R),T=Math.floor(E/60),A=E%60;return(R<=0?"+":"-")+_(T,2,"0")+":"+_(A,2,"0")},m:function C(R,E){if(R.date()<E.date())return-C(E,R);var T=12*(E.year()-R.year())+(E.month()-R.month()),A=R.clone().add(T,l),j=E-A<0,$=R.clone().add(T+(j?-1:1),l);return+(-(T+(E-A)/(j?A-$:$-A))||0)},a:function(C){return C<0?Math.ceil(C)||0:Math.floor(C)},p:function(C){return{M:l,y:m,w:c,d,D:p,h:u,m:a,s:o,ms:i,Q:f}[C]||String(C||"").toLowerCase().replace(/s$/,"")},u:function(C){return C===void 0}},O="en",S={};S[O]=b;var v="$isDayjsObject",B=function(C){return C instanceof ee||!(!C||!C[v])},k=function C(R,E,T){var A;if(!R)return O;if(typeof R=="string"){var j=R.toLowerCase();S[j]&&(A=j),E&&(S[j]=E,A=j);var $=R.split("-");if(!A&&$.length>1)return C($[0])}else{var V=R.name;S[V]=R,A=V}return!T&&A&&(O=A),A||!T&&O},M=function(C,R){if(B(C))return C.clone();var E=typeof R=="object"?R:{};return E.date=C,E.args=arguments,new ee(E)},D=x;D.l=k,D.i=B,D.w=function(C,R){return M(C,{locale:R.$L,utc:R.$u,x:R.$x,$offset:R.$offset})};var ee=function(){function C(E){this.$L=k(E.locale,null,!0),this.parse(E),this.$x=this.$x||E.x||{},this[v]=!0}var R=C.prototype;return R.parse=function(E){this.$d=function(T){var A=T.date,j=T.utc;if(A===null)return new Date(NaN);if(D.u(A))return new Date;if(A instanceof Date)return new Date(A);if(typeof A=="string"&&!/Z$/i.test(A)){var $=A.match(y);if($){var V=$[2]-1||0,Y=($[7]||"0").substring(0,3);return j?new Date(Date.UTC($[1],V,$[3]||1,$[4]||0,$[5]||0,$[6]||0,Y)):new Date($[1],V,$[3]||1,$[4]||0,$[5]||0,$[6]||0,Y)}}return new Date(A)}(E),this.init()},R.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},R.$utils=function(){return D},R.isValid=function(){return this.$d.toString()!==h},R.isSame=function(E,T){var A=M(E);return this.startOf(T)<=A&&A<=this.endOf(T)},R.isAfter=function(E,T){return M(E)<this.startOf(T)},R.isBefore=function(E,T){return this.endOf(T)<M(E)},R.$g=function(E,T,A){return D.u(E)?this[T]:this.set(A,E)},R.unix=function(){return Math.floor(this.valueOf()/1e3)},R.valueOf=function(){return this.$d.getTime()},R.startOf=function(E,T){var A=this,j=!!D.u(T)||T,$=D.p(E),V=function(tt,be){var Me=D.w(A.$u?Date.UTC(A.$y,be,tt):new Date(A.$y,be,tt),A);return j?Me:Me.endOf(d)},Y=function(tt,be){return D.w(A.toDate()[tt].apply(A.toDate("s"),(j?[0,0,0,0]:[23,59,59,999]).slice(be)),A)},ie=this.$W,ae=this.$M,me=this.$D,mt="set"+(this.$u?"UTC":"");switch($){case m:return j?V(1,0):V(31,11);case l:return j?V(1,ae):V(0,ae+1);case c:var et=this.$locale().weekStart||0,Kt=(ie<et?ie+7:ie)-et;return V(j?me-Kt:me+(6-Kt),ae);case d:case p:return Y(mt+"Hours",0);case u:return Y(mt+"Minutes",1);case a:return Y(mt+"Seconds",2);case o:return Y(mt+"Milliseconds",3);default:return this.clone()}},R.endOf=function(E){return this.startOf(E,!1)},R.$set=function(E,T){var A,j=D.p(E),$="set"+(this.$u?"UTC":""),V=(A={},A[d]=$+"Date",A[p]=$+"Date",A[l]=$+"Month",A[m]=$+"FullYear",A[u]=$+"Hours",A[a]=$+"Minutes",A[o]=$+"Seconds",A[i]=$+"Milliseconds",A)[j],Y=j===d?this.$D+(T-this.$W):T;if(j===l||j===m){var ie=this.clone().set(p,1);ie.$d[V](Y),ie.init(),this.$d=ie.set(p,Math.min(this.$D,ie.daysInMonth())).$d}else V&&this.$d[V](Y);return this.init(),this},R.set=function(E,T){return this.clone().$set(E,T)},R.get=function(E){return this[D.p(E)]()},R.add=function(E,T){var A,j=this;E=Number(E);var $=D.p(T),V=function(ae){var me=M(j);return D.w(me.date(me.date()+Math.round(ae*E)),j)};if($===l)return this.set(l,this.$M+E);if($===m)return this.set(m,this.$y+E);if($===d)return V(1);if($===c)return V(7);var Y=(A={},A[a]=r,A[u]=s,A[o]=n,A)[$]||1,ie=this.$d.getTime()+E*Y;return D.w(ie,this)},R.subtract=function(E,T){return this.add(-1*E,T)},R.format=function(E){var T=this,A=this.$locale();if(!this.isValid())return A.invalidDate||h;var j=E||"YYYY-MM-DDTHH:mm:ssZ",$=D.z(this),V=this.$H,Y=this.$m,ie=this.$M,ae=A.weekdays,me=A.months,mt=A.meridiem,et=function(be,Me,Ut,Cn){return be&&(be[Me]||be(T,j))||Ut[Me].slice(0,Cn)},Kt=function(be){return D.s(V%12||12,be,"0")},tt=mt||function(be,Me,Ut){var Cn=be<12?"AM":"PM";return Ut?Cn.toLowerCase():Cn};return j.replace(w,function(be,Me){return Me||function(Ut){switch(Ut){case"YY":return String(T.$y).slice(-2);case"YYYY":return D.s(T.$y,4,"0");case"M":return ie+1;case"MM":return D.s(ie+1,2,"0");case"MMM":return et(A.monthsShort,ie,me,3);case"MMMM":return et(me,ie);case"D":return T.$D;case"DD":return D.s(T.$D,2,"0");case"d":return String(T.$W);case"dd":return et(A.weekdaysMin,T.$W,ae,2);case"ddd":return et(A.weekdaysShort,T.$W,ae,3);case"dddd":return ae[T.$W];case"H":return String(V);case"HH":return D.s(V,2,"0");case"h":return Kt(1);case"hh":return Kt(2);case"a":return tt(V,Y,!0);case"A":return tt(V,Y,!1);case"m":return String(Y);case"mm":return D.s(Y,2,"0");case"s":return String(T.$s);case"ss":return D.s(T.$s,2,"0");case"SSS":return D.s(T.$ms,3,"0");case"Z":return $}return null}(be)||$.replace(":","")})},R.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},R.diff=function(E,T,A){var j,$=this,V=D.p(T),Y=M(E),ie=(Y.utcOffset()-this.utcOffset())*r,ae=this-Y,me=function(){return D.m($,Y)};switch(V){case m:j=me()/12;break;case l:j=me();break;case f:j=me()/3;break;case c:j=(ae-ie)/6048e5;break;case d:j=(ae-ie)/864e5;break;case u:j=ae/s;break;case a:j=ae/r;break;case o:j=ae/n;break;default:j=ae}return A?j:D.a(j)},R.daysInMonth=function(){return this.endOf(l).$D},R.$locale=function(){return S[this.$L]},R.locale=function(E,T){if(!E)return this.$L;var A=this.clone(),j=k(E,T,!0);return j&&(A.$L=j),A},R.clone=function(){return D.w(this.$d,this)},R.toDate=function(){return new Date(this.valueOf())},R.toJSON=function(){return this.isValid()?this.toISOString():null},R.toISOString=function(){return this.$d.toISOString()},R.toString=function(){return this.$d.toUTCString()},C}(),te=ee.prototype;return M.prototype=te,[["$ms",i],["$s",o],["$m",a],["$H",u],["$W",d],["$M",l],["$y",m],["$D",p]].forEach(function(C){te[C[1]]=function(R){return this.$g(R,C[0],C[1])}}),M.extend=function(C,R){return C.$i||(C(R,ee,M),C.$i=!0),M},M.locale=k,M.isDayjs=B,M.unix=function(C){return M(1e3*C)},M.en=S[O],M.Ls=S,M.p={},M})})(W);var Q=W.exports,ce=K(Q);const se=new BroadcastChannel("order_channel"),U=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,H=Object.keys,z=Array.isArray;function G(t,e){return typeof e!="object"||H(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise=="undefined"||U.Promise||(U.Promise=Promise);const De=Object.getPrototypeOf,Lt={}.hasOwnProperty;function fe(t,e){return Lt.call(t,e)}function he(t,e){typeof e=="function"&&(e=e(De(t))),(typeof Reflect=="undefined"?H:Reflect.ownKeys)(e).forEach(n=>{Oe(t,n,e[n])})}const qr=Object.defineProperty;function Oe(t,e,n,r){qr(t,e,G(n&&fe(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function rt(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Oe(t.prototype,"constructor",t),{extend:he.bind(null,t.prototype)}}}}const Ji=Object.getOwnPropertyDescriptor;function Tn(t,e){let n;return Ji(t,e)||(n=De(t))&&Tn(n,e)}const Yi=[].slice;function qt(t,e,n){return Yi.call(t,e,n)}function Hr(t,e){return e(t)}function gt(t){if(!t)throw new Error("Assertion Failed")}function zr(t){U.setImmediate?setImmediate(t):setTimeout(t,0)}function Vr(t,e){return t.reduce((n,r,s)=>{var i=e(r,s);return i&&(n[i[0]]=i[1]),n},{})}function Ae(t,e){if(typeof e=="string"&&fe(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,s=e.length;r<s;++r){var i=Ae(t,e[r]);n.push(i)}return n}var o=e.indexOf(".");if(o!==-1){var a=t[e.substr(0,o)];return a==null?void 0:Ae(a,e.substr(o+1))}}function _e(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){gt(typeof n!="string"&&"length"in n);for(var r=0,s=e.length;r<s;++r)_e(t,e[r],n[r])}else{var i=e.indexOf(".");if(i!==-1){var o=e.substr(0,i),a=e.substr(i+1);if(a==="")n===void 0?z(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var u=t[o];u&&fe(t,o)||(u=t[o]={}),_e(u,a,n)}}else n===void 0?z(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Wr(t){var e={};for(var n in t)fe(t,n)&&(e[n]=t[n]);return e}const Gi=[].concat;function Jr(t){return Gi.apply([],t)}const Yr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Jr([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>U[t]),Xi=Yr.map(t=>U[t]);Vr(Yr,t=>[t,!0]);let Ie=null;function bt(t){Ie=typeof WeakMap!="undefined"&&new WeakMap;const e=Pn(t);return Ie=null,e}function Pn(t){if(!t||typeof t!="object")return t;let e=Ie&&Ie.get(t);if(e)return e;if(z(t)){e=[],Ie&&Ie.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Pn(t[n]))}else if(Xi.indexOf(t.constructor)>=0)e=t;else{const i=De(t);for(var s in e=i===Object.prototype?{}:Object.create(i),Ie&&Ie.set(t,e),t)fe(t,s)&&(e[s]=Pn(t[s]))}return e}const{toString:Qi}={};function Dn(t){return Qi.call(t).slice(8,-1)}const In=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",Zi=typeof In=="symbol"?function(t){var e;return t!=null&&(e=t[In])&&e.apply(t)}:function(){return null},st={};function ke(t){var e,n,r,s;if(arguments.length===1){if(z(t))return t.slice();if(this===st&&typeof t=="string")return[t];if(s=Zi(t)){for(n=[];!(r=s.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const jn=typeof Symbol!="undefined"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var xe=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Gr(t,e){xe=t,Xr=e}var Xr=()=>!0;const eo=!new Error("").stack;function Ke(){if(eo)try{throw Ke.arguments,new Error}catch(t){return t}return new Error}function Nn(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Xr).map(r=>`
`+r).join("")):""}var Qr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$n=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Qr),to={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function it(t,e){this._e=Ke(),this.name=t,this.message=e}function Zr(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,s)=>s.indexOf(n)===r).join(`
`)}function Ht(t,e,n,r){this._e=Ke(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Zr(t,e)}function wt(t,e){this._e=Ke(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=Zr(t,e)}rt(it).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Nn(this._e,2))}},toString:function(){return this.name+": "+this.message}}),rt(Ht).from(it),rt(wt).from(it);var Fn=$n.reduce((t,e)=>(t[e]=e+"Error",t),{});const no=it;var N=$n.reduce((t,e)=>{var n=e+"Error";function r(s,i){this._e=Ke(),this.name=n,s?typeof s=="string"?(this.message=`${s}${i?`
 `+i:""}`,this.inner=i||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=to[e]||n,this.inner=null)}return rt(r).from(no),t[e]=r,t},{});N.Syntax=SyntaxError,N.Type=TypeError,N.Range=RangeError;var es=Qr.reduce((t,e)=>(t[e+"Error"]=N[e],t),{}),zt=$n.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=N[e]),t),{});function X(){}function _t(t){return t}function ro(t,e){return t==null||t===_t?e:function(n){return e(t(n))}}function Ue(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function so(t,e){return t===X?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ue(r,this.onsuccess):r),s&&(this.onerror=this.onerror?Ue(s,this.onerror):s),i!==void 0?i:n}}function io(t,e){return t===X?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ue(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ue(r,this.onerror):r)}}function oo(t,e){return t===X?e:function(n){var r=t.apply(this,arguments);G(n,r);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Ue(s,this.onsuccess):s),i&&(this.onerror=this.onerror?Ue(i,this.onerror):i),r===void 0?o===void 0?void 0:o:G(r,o)}}function ao(t,e){return t===X?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Bn(t,e){return t===X?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}zt.ModifyError=Ht,zt.DexieError=it,zt.BulkError=wt;var vt={};const ts=100,[Mn,Vt,Kn]=typeof Promise=="undefined"?[]:(()=>{let t=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[t,De(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,De(e),t]})(),ns=Vt&&Vt.then,Wt=Mn&&Mn.constructor,Un=!!Kn;var Ln=!1,co=Kn?()=>{Kn.then(Xt)}:U.setImmediate?setImmediate.bind(null,Xt):U.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Xt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Xt,0)},xt=function(t,e){Et.push([t,e]),Jt&&(co(),Jt=!1)},qn=!0,Jt=!0,Le=[],Yt=[],Hn=null,zn=_t,ot={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:fs,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{fs(t[0],t[1])}catch(e){}})}},I=ot,Et=[],qe=0,Gt=[];function P(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=X,this._lib=!1;var e=this._PSD=I;if(xe&&(this._stackHolder=Ke(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==vt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Wn(this,this._value))}this._state=null,this._value=null,++e.ref,ss(this,t)}const Vn={get:function(){var t=I,e=en;function n(r,s){var i=!t.global&&(t!==I||e!==en);const o=i&&!Ce();var a=new P((u,d)=>{Jn(this,new rs(nn(r,t,i,o),nn(s,t,i,o),u,d,t))});return xe&&as(a,this),a}return n.prototype=vt,n},set:function(t){Oe(this,"then",t&&t.prototype===vt?Vn:{get:function(){return t},set:Vn.set})}};function rs(t,e,n,r,s){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=s}function ss(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&St();n&&typeof n.then=="function"?ss(t,(s,i)=>{n instanceof P?n._then(s,i):n.then(s,i)}):(t._state=!0,t._value=n,is(t)),r&&Ot()}},Wn.bind(null,t))}catch(n){Wn(t,n)}}function Wn(t,e){if(Yt.push(e),t._state===null){var n=t._lib&&St();e=zn(e),t._state=!1,t._value=e,xe&&e!==null&&typeof e=="object"&&!e._promise&&function(r,s,i){try{r.apply(null,i)}catch(o){}}(()=>{var r=Tn(e,"stack");e._promise=t,Oe(e,"stack",{get:()=>Ln?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){Le.some(s=>s._value===r._value)||Le.push(r)}(t),is(t),n&&Ot()}}function is(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Jn(t,e[n]);var s=t._PSD;--s.ref||s.finalize(),qe===0&&(++qe,xt(()=>{--qe==0&&Yn()},[]))}function Jn(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++qe,xt(uo,[n,t,e])}else t._listeners.push(e)}function uo(t,e,n){try{Hn=e;var r,s=e._value;e._state?r=t(s):(Yt.length&&(Yt=[]),r=t(s),Yt.indexOf(s)===-1&&function(i){for(var o=Le.length;o;)if(Le[--o]._value===i._value)return void Le.splice(o,1)}(e)),n.resolve(r)}catch(i){n.reject(i)}finally{Hn=null,--qe==0&&Yn(),--n.psd.ref||n.psd.finalize()}}function os(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var s,i,o=t._value;o!=null?(s=o.name||"Error",i=o.message||o,r=Nn(o,0)):(s=o,i=""),e.push(s+(i?": "+i:"")+r)}return xe&&((r=Nn(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&os(t._prev,e,n)),e}function as(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Xt(){St()&&Ot()}function St(){var t=qn;return qn=!1,Jt=!1,t}function Ot(){var t,e,n;do for(;Et.length>0;)for(t=Et,Et=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(Et.length>0);qn=!0,Jt=!0}function Yn(){var t=Le;Le=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=Gt.slice(0),n=e.length;n;)e[--n]()}function Qt(t){return new P(vt,!1,t)}function ne(t,e){var n=I;return function(){var r=St(),s=I;try{return Ne(n,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{Ne(s,!1),r&&Ot()}}}he(P.prototype,{then:Vn,_then:function(t,e){Jn(this,new rs(null,null,t,e,I))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Qt(r)):this.then(null,r=>r&&r.name===e?n(r):Qt(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Qt(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Ln=!0;var t=os(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Ln=!1}}},timeout:function(t,e){return t<1/0?new P((n,r)=>{var s=setTimeout(()=>r(new N.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol!="undefined"&&Symbol.toStringTag&&Oe(P.prototype,Symbol.toStringTag,"Dexie.Promise"),ot.env=cs(),he(P,{all:function(){var t=ke.apply(null,arguments).map(tn);return new P(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((s,i)=>P.resolve(s).then(o=>{t[i]=o,--r||e(t)},n))})},resolve:t=>{if(t instanceof P)return t;if(t&&typeof t.then=="function")return new P((n,r)=>{t.then(n,r)});var e=new P(vt,!0,t);return as(e,Hn),e},reject:Qt,race:function(){var t=ke.apply(null,arguments).map(tn);return new P((e,n)=>{t.map(r=>P.resolve(r).then(e,n))})},PSD:{get:()=>I,set:t=>I=t},totalEchoes:{get:()=>en},newPSD:je,usePSD:ct,scheduler:{get:()=>xt,set:t=>{xt=t}},rejectionMapper:{get:()=>zn,set:t=>{zn=t}},follow:(t,e)=>new P((n,r)=>je((s,i)=>{var o=I;o.unhandleds=[],o.onunhandled=i,o.finalize=Ue(function(){(function(a){function u(){a(),Gt.splice(Gt.indexOf(u),1)}Gt.push(u),++qe,xt(()=>{--qe==0&&Yn()},[])})(()=>{this.unhandleds.length===0?s():i(this.unhandleds[0])})},o.finalize),t()},e,n,r))}),Wt&&(Wt.allSettled&&Oe(P,"allSettled",function(){const t=ke.apply(null,arguments).map(tn);return new P(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((s,i)=>P.resolve(s).then(o=>r[i]={status:"fulfilled",value:o},o=>r[i]={status:"rejected",reason:o}).then(()=>--n||e(r)))})}),Wt.any&&typeof AggregateError!="undefined"&&Oe(P,"any",function(){const t=ke.apply(null,arguments).map(tn);return new P((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const s=new Array(r);t.forEach((i,o)=>P.resolve(i).then(a=>e(a),a=>{s[o]=a,--r||n(new AggregateError(s))}))})}));const le={awaits:0,echoes:0,id:0};var lo=0,Zt=[],Gn=0,en=0,fo=0;function je(t,e,n,r){var s=I,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++fo;var o=ot.env;i.env=Un?{Promise:P,PromiseProp:{value:P,configurable:!0,writable:!0},all:P.all,race:P.race,allSettled:P.allSettled,any:P.any,resolve:P.resolve,reject:P.reject,nthen:ls(o.nthen,i),gthen:ls(o.gthen,i)}:{},e&&G(i,e),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=ct(i,t,n,r);return i.ref===0&&i.finalize(),a}function at(){return le.id||(le.id=++lo),++le.awaits,le.echoes+=ts,le.id}function Ce(){return!!le.awaits&&(--le.awaits==0&&(le.id=0),le.echoes=le.awaits*ts,!0)}function tn(t){return le.echoes&&t&&t.constructor===Wt?(at(),t.then(e=>(Ce(),e),e=>(Ce(),ue(e)))):t}function ho(t){++en,le.echoes&&--le.echoes!=0||(le.echoes=le.id=0),Zt.push(I),Ne(t,!0)}function po(){var t=Zt[Zt.length-1];Zt.pop(),Ne(t,!1)}function Ne(t,e){var n=I;if((e?!le.echoes||Gn++&&t===I:!Gn||--Gn&&t===I)||us(e?ho.bind(null,t):po),t!==I&&(I=t,n===ot&&(ot.env=cs()),Un)){var r=ot.env.Promise,s=t.env;Vt.then=s.nthen,r.prototype.then=s.gthen,(n.global||t.global)&&(Object.defineProperty(U,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function cs(){var t=U.Promise;return Un?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(U,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Vt.then,gthen:t.prototype.then}:{}}function ct(t,e,n,r,s){var i=I;try{return Ne(t,!0),e(n,r,s)}finally{Ne(i,!1)}}function us(t){ns.call(Mn,t)}function nn(t,e,n,r){return typeof t!="function"?t:function(){var s=I;n&&at(),Ne(e,!0);try{return t.apply(this,arguments)}finally{Ne(s,!1),r&&us(Ce)}}}function ls(t,e){return function(n,r){return t.call(this,nn(n,e),nn(r,e))}}(""+ns).indexOf("[native code]")===-1&&(at=Ce=X);const ds="unhandledrejection";function fs(t,e){var n;try{n=e.onuncatched(t)}catch(i){}if(n!==!1)try{var r,s={promise:e,reason:t};if(U.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(ds,!0,!0),G(r,s)):U.CustomEvent&&G(r=new CustomEvent(ds,{detail:s}),s),r&&U.dispatchEvent&&(dispatchEvent(r),!U.PromiseRejectionEvent&&U.onunhandledrejection))try{U.onunhandledrejection(r)}catch(i){}xe&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch(i){}}var ue=P.reject;function Xn(t,e,n,r){if(t.idbdb&&(t._state.openComplete||I.letThrough||t._vip)){var s=t._createTransaction(e,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===Fn.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Xn(t,e,n,r))):ue(i)}return s._promise(e,(i,o)=>je(()=>(I.trans=s,r(i,o,s)))).then(i=>s._completion.then(()=>i))}if(t._state.openComplete)return ue(new N.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return ue(new N.DatabaseClosed);t.open().catch(X)}return t._state.dbReadyPromise.then(()=>Xn(t,e,n,r))}const hs="3.2.7",He="ï¿¿",Qn=-1/0,Re="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ps="String expected.",At=[],rn=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),mo=rn,yo=rn,ms=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),sn="__dbnames",Zn="readonly",er="readwrite";function ze(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const ys={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function on(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=bt(e))[t],e)}class go{_trans(e,n,r){const s=this._tx||I.trans,i=this.name;function o(u,d,c){if(!c.schema[i])throw new N.NotFound("Table "+i+" not part of transaction");return n(c.idbtrans,c)}const a=St();try{return s&&s.db===this.db?s===I.trans?s._promise(e,o,r):je(()=>s._promise(e,o,r),{trans:s,transless:I.transless||I}):Xn(this.db,e,[this.name],o)}finally{a&&Ot()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(s=>this.hook.reading.fire(s))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(z(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=H(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(d=>{if(d.compound&&n.every(c=>d.keyPath.indexOf(c)>=0)){for(let c=0;c<n.length;++c)if(n.indexOf(d.keyPath[c])===-1)return!1;return!0}return!1}).sort((d,c)=>d.keyPath.length-c.keyPath.length)[0];if(r&&this.db._maxKey!==He){const d=r.keyPath.slice(0,n.length);return this.where(d).equals(d.map(c=>e[c]))}!r&&xe&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:s}=this.schema,i=this.db._deps.indexedDB;function o(d,c){try{return i.cmp(d,c)===0}catch(l){return!1}}const[a,u]=n.reduce(([d,c],l)=>{const f=s[l],m=e[l];return[d||f,d||!f?ze(c,f&&f.multi?p=>{const h=Ae(p,l);return z(h)&&h.some(y=>o(m,y))}:p=>o(m,Ae(p,l))):c]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(u):r?this.filter(u):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,z(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const s=Object.create(e.prototype);for(var i in r)if(fe(r,i))try{s[i]=r[i]}catch(o){}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){G(this,e)})}add(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=on(s)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[i]})).then(o=>o.numFailures?P.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{_e(e,s,o)}catch(a){}return o})}update(e,n){if(typeof e!="object"||z(e))return this.where(":id").equals(e).modify(n);{const r=Ae(e,this.schema.primKey.keyPath);if(r===void 0)return ue(new N.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?H(n).forEach(s=>{_e(e,s,n[s])}):n(e,{value:e,primKey:r})}catch(s){}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:s}=this.schema.primKey;let i=e;return s&&r&&(i=on(s)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[i],keys:n!=null?[n]:null})).then(o=>o.numFailures?P.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{_e(e,s,o)}catch(a){}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?P.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:ys})).then(e=>e.numFailures?P.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(s=>this.hook.reading.fire(s))))}bulkAdd(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:u}=this.schema.primKey;if(u&&s)throw new N.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new N.InvalidArgument("Arguments objects and keys must have the same length");const d=e.length;let c=u&&a?e.map(on(u)):e;return this.core.mutate({trans:o,type:"add",keys:s,values:c,wantResults:i}).then(({numFailures:l,results:f,lastResult:m,failures:p})=>{if(l===0)return i?f:m;throw new wt(`${this.name}.bulkAdd(): ${l} of ${d} operations failed`,p)})})}bulkPut(e,n,r){const s=Array.isArray(n)?n:void 0,i=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:u}=this.schema.primKey;if(u&&s)throw new N.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new N.InvalidArgument("Arguments objects and keys must have the same length");const d=e.length;let c=u&&a?e.map(on(u)):e;return this.core.mutate({trans:o,type:"put",keys:s,values:c,wantResults:i}).then(({numFailures:l,results:f,lastResult:m,failures:p})=>{if(l===0)return i?f:m;throw new wt(`${this.name}.bulkPut(): ${l} of ${d} operations failed`,p)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:s,failures:i})=>{if(r===0)return s;throw new wt(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,i)})}}function kt(t){var e={},n=function(o,a){if(a){for(var u=arguments.length,d=new Array(u-1);--u;)d[u-1]=arguments[u];return e[o].subscribe.apply(null,d),t}if(typeof o=="string")return e[o]};n.addEventType=i;for(var r=1,s=arguments.length;r<s;++r)i(arguments[r]);return n;function i(o,a,u){if(typeof o!="object"){var d;a||(a=ao),u||(u=X);var c={subscribers:[],fire:u,subscribe:function(l){c.subscribers.indexOf(l)===-1&&(c.subscribers.push(l),c.fire=a(c.fire,l))},unsubscribe:function(l){c.subscribers=c.subscribers.filter(function(f){return f!==l}),c.fire=c.subscribers.reduce(a,u)}};return e[o]=n[o]=c,c}H(d=o).forEach(function(l){var f=d[l];if(z(f))i(l,d[l][0],d[l][1]);else{if(f!=="asap")throw new N.InvalidArgument("Invalid event config");var m=i(l,_t,function(){for(var p=arguments.length,h=new Array(p);p--;)h[p]=arguments[p];m.subscribers.forEach(function(y){zr(function(){y.apply(null,h)})})})}})}}function Ct(t,e){return rt(e).from({prototype:t}),e}function ut(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function tr(t,e){t.filter=ze(t.filter,e)}function nr(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>ze(r(),e()):e,t.justLimit=n&&!r}function an(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new N.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function gs(t,e,n){const r=an(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function cn(t,e,n,r){const s=t.replayFilter?ze(t.filter,t.replayFilter()):t.filter;if(t.or){const i={},o=(a,u,d)=>{if(!s||s(u,d,f=>u.stop(f),f=>u.fail(f))){var c=u.primaryKey,l=""+c;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(c)),fe(i,l)||(i[l]=!0,e(a,u,d))}};return Promise.all([t.or._iterate(o,n),bs(gs(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return bs(gs(t,r,n),ze(t.algorithm,s),e,!t.keysOnly&&t.valueMapper)}function bs(t,e,n,r){var s=ne(r?(i,o,a)=>n(r(i),o,a):n);return t.then(i=>{if(i)return i.start(()=>{var o=()=>i.continue();e&&!e(i,a=>o=a,a=>{i.stop(a),o=X},a=>{i.fail(a),o=X})||s(i.value,i,a=>o=a),o()})})}function pe(t,e){try{const n=ws(t),r=ws(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(s,i){const o=s.length,a=i.length,u=o<a?o:a;for(let d=0;d<u;++d)if(s[d]!==i[d])return s[d]<i[d]?-1:1;return o===a?0:o<a?-1:1}(_s(t),_s(e));case"Array":return function(s,i){const o=s.length,a=i.length,u=o<a?o:a;for(let d=0;d<u;++d){const c=pe(s[d],i[d]);if(c!==0)return c}return o===a?0:o<a?-1:1}(t,e)}}catch(n){}return NaN}function ws(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Dn(t);return n==="ArrayBuffer"?"binary":n}function _s(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class bo{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,ue.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,ue.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=ze(n.algorithm,e)}_iterate(e,n){return cn(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&G(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>cn(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,s=r.table.core;if(ut(r,!0))return s.count({trans:n,query:{index:an(r,s.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var i=0;return cn(r,()=>(++i,!1),n,s).then(()=>i)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),s=r[0],i=r.length-1;function o(d,c){return c?o(d[r[c]],c-1):d[s]}var a=this._ctx.dir==="next"?1:-1;function u(d,c){var l=o(d,i),f=o(c,i);return l<f?-a:l>f?a:0}return this.toArray(function(d){return d.sort(u)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&ut(r,!0)&&r.limit>0){const{valueMapper:s}=r,i=an(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(({result:o})=>s?o.map(s):o)}{const s=[];return cn(r,i=>s.push(i),n,r.table.core).then(()=>s)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,ut(n)?nr(n,()=>{var r=e;return(s,i)=>r===0||(r===1?(--r,!1):(i(()=>{s.advance(r),r=0}),!1))}):nr(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),nr(this._ctx,()=>{var n=e;return function(r,s,i){return--n<=0&&s(i),n>=0}},!0),this}until(e,n){return tr(this._ctx,function(r,s,i){return!e(r.value)||(s(i),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return tr(this._ctx,function(s){return e(s.value)}),n=this._ctx,r=e,n.isMatch=ze(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.key,s)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,s){e(s.primaryKey,s)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&ut(n,!0)&&n.limit>0)return this._read(s=>{var i=an(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(({result:s})=>s).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(s,i){r.push(i.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return tr(this._ctx,function(s){var i=s.primaryKey.toString(),o=fe(r,i);return r[i]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(r=>{var s;if(typeof e=="function")s=e;else{var i=H(e),o=i.length;s=function(h){for(var y=!1,w=0;w<o;++w){var b=i[w],_=e[b];Ae(h,b)!==_&&(_e(h,b,_),y=!0)}return y}}const a=n.table.core,{outbound:u,extractKey:d}=a.schema.primaryKey,c=this.db._options.modifyChunkSize||200,l=[];let f=0;const m=[],p=(h,y)=>{const{failures:w,numFailures:b}=y;f+=h-b;for(let _ of H(w))l.push(w[_])};return this.clone().primaryKeys().then(h=>{const y=w=>{const b=Math.min(c,h.length-w);return a.getMany({trans:r,keys:h.slice(w,w+b),cache:"immutable"}).then(_=>{const x=[],O=[],S=u?[]:null,v=[];for(let k=0;k<b;++k){const M=_[k],D={value:bt(M),primKey:h[w+k]};s.call(D,D.value,D)!==!1&&(D.value==null?v.push(h[w+k]):u||pe(d(M),d(D.value))===0?(O.push(D.value),u&&S.push(h[w+k])):(v.push(h[w+k]),x.push(D.value)))}const B=ut(n)&&n.limit===1/0&&(typeof e!="function"||e===rr)&&{index:n.index,range:n.range};return Promise.resolve(x.length>0&&a.mutate({trans:r,type:"add",values:x}).then(k=>{for(let M in k.failures)v.splice(parseInt(M),1);p(x.length,k)})).then(()=>(O.length>0||B&&typeof e=="object")&&a.mutate({trans:r,type:"put",keys:S,values:O,criteria:B,changeSpec:typeof e!="function"&&e}).then(k=>p(O.length,k))).then(()=>(v.length>0||B&&e===rr)&&a.mutate({trans:r,type:"delete",keys:v,criteria:B}).then(k=>p(v.length,k))).then(()=>h.length>w+b&&y(w+c))})};return y(0).then(()=>{if(l.length>0)throw new Ht("Error modifying one or more objects",l,f,m);return h.length})})})}delete(){var e=this._ctx,n=e.range;return ut(e)&&(e.isPrimKey&&!yo||n.type===3)?this._write(r=>{const{primaryKey:s}=e.table.core.schema,i=n;return e.table.core.count({trans:r,query:{index:s,range:i}}).then(o=>e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(({failures:a,lastResult:u,results:d,numFailures:c})=>{if(c)throw new Ht("Could not delete some values",Object.keys(a).map(l=>a[l]),o-c);return o-c}))}):this.modify(rr)}}const rr=(t,e)=>e.value=null;function wo(t,e){return t<e?-1:t===e?0:1}function _o(t,e){return t>e?-1:t===e?0:1}function we(t,e,n){var r=t instanceof xs?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function lt(t){return new t.Collection(t,()=>vs("")).limit(0)}function vo(t,e,n,r,s,i){for(var o=Math.min(t.length,r.length),a=-1,u=0;u<o;++u){var d=e[u];if(d!==r[u])return s(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):s(t[u],r[u])<0?t.substr(0,u)+r[u]+n.substr(u+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;s(t[u],d)<0&&(a=u)}return o<r.length&&i==="next"?t+n.substr(t.length):o<t.length&&i==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function un(t,e,n,r){var s,i,o,a,u,d,c,l=n.length;if(!n.every(h=>typeof h=="string"))return we(t,ps);function f(h){s=function(w){return w==="next"?b=>b.toUpperCase():b=>b.toLowerCase()}(h),i=function(w){return w==="next"?b=>b.toLowerCase():b=>b.toUpperCase()}(h),o=h==="next"?wo:_o;var y=n.map(function(w){return{lower:i(w),upper:s(w)}}).sort(function(w,b){return o(w.lower,b.lower)});a=y.map(function(w){return w.upper}),u=y.map(function(w){return w.lower}),d=h,c=h==="next"?"":r}f("next");var m=new t.Collection(t,()=>$e(a[0],u[l-1]+r));m._ondirectionchange=function(h){f(h)};var p=0;return m._addAlgorithm(function(h,y,w){var b=h.key;if(typeof b!="string")return!1;var _=i(b);if(e(_,u,p))return!0;for(var x=null,O=p;O<l;++O){var S=vo(b,_,a[O],u[O],o,d);S===null&&x===null?p=O+1:(x===null||o(x,S)>0)&&(x=S)}return y(x!==null?function(){h.continue(x+c)}:w),!1}),m}function $e(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function vs(t){return{type:1,lower:t,upper:t}}class xs{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,s){r=r!==!1,s=s===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||s)&&(!r||!s)?lt(this):new this.Collection(this,()=>$e(e,n,!r,!s))}catch(i){return we(this,Re)}}equals(e){return e==null?we(this,Re):new this.Collection(this,()=>vs(e))}above(e){return e==null?we(this,Re):new this.Collection(this,()=>$e(e,void 0,!0))}aboveOrEqual(e){return e==null?we(this,Re):new this.Collection(this,()=>$e(e,void 0,!1))}below(e){return e==null?we(this,Re):new this.Collection(this,()=>$e(void 0,e,!1,!0))}belowOrEqual(e){return e==null?we(this,Re):new this.Collection(this,()=>$e(void 0,e))}startsWith(e){return typeof e!="string"?we(this,ps):this.between(e,e+He,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):un(this,(n,r)=>n.indexOf(r[0])===0,[e],He)}equalsIgnoreCase(e){return un(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=ke.apply(st,arguments);return e.length===0?lt(this):un(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=ke.apply(st,arguments);return e.length===0?lt(this):un(this,(n,r)=>r.some(s=>n.indexOf(s)===0),e,He)}anyOf(){const e=ke.apply(st,arguments);let n=this._cmp;try{e.sort(n)}catch(i){return we(this,Re)}if(e.length===0)return lt(this);const r=new this.Collection(this,()=>$e(e[0],e[e.length-1]));r._ondirectionchange=i=>{n=i==="next"?this._ascending:this._descending,e.sort(n)};let s=0;return r._addAlgorithm((i,o,a)=>{const u=i.key;for(;n(u,e[s])>0;)if(++s,s===e.length)return o(a),!1;return n(u,e[s])===0||(o(()=>{i.continue(e[s])}),!1)}),r}notEqual(e){return this.inAnyRange([[Qn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=ke.apply(st,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch(r){return we(this,Re)}const n=e.reduce((r,s)=>r?r.concat([[r[r.length-1][1],s]]):[[Qn,s]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,s=this._ascending,i=this._descending,o=this._min,a=this._max;if(e.length===0)return lt(this);if(!e.every(b=>b[0]!==void 0&&b[1]!==void 0&&s(b[0],b[1])<=0))return we(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",N.InvalidArgument);const u=!n||n.includeLowers!==!1,d=n&&n.includeUppers===!0;let c,l=s;function f(b,_){return l(b[0],_[0])}try{c=e.reduce(function(b,_){let x=0,O=b.length;for(;x<O;++x){const S=b[x];if(r(_[0],S[1])<0&&r(_[1],S[0])>0){S[0]=o(S[0],_[0]),S[1]=a(S[1],_[1]);break}}return x===O&&b.push(_),b},[]),c.sort(f)}catch(b){return we(this,Re)}let m=0;const p=d?b=>s(b,c[m][1])>0:b=>s(b,c[m][1])>=0,h=u?b=>i(b,c[m][0])>0:b=>i(b,c[m][0])>=0;let y=p;const w=new this.Collection(this,()=>$e(c[0][0],c[c.length-1][1],!u,!d));return w._ondirectionchange=b=>{b==="next"?(y=p,l=s):(y=h,l=i),c.sort(f)},w._addAlgorithm((b,_,x)=>{for(var O=b.key;y(O);)if(++m,m===c.length)return _(x),!1;return!!function(S){return!p(S)&&!h(S)}(O)||(this._cmp(O,c[m][1])===0||this._cmp(O,c[m][0])===0||_(()=>{l===s?b.continue(c[m][0]):b.continue(c[m][1])}),!1)}),w}startsWithAnyOf(){const e=ke.apply(st,arguments);return e.every(n=>typeof n=="string")?e.length===0?lt(this):this.inAnyRange(e.map(n=>[n,n+He])):we(this,"startsWithAnyOf() only works with strings")}}function Ee(t){return ne(function(e){return Rt(e),t(e.target.error),!1})}function Rt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Tt="storagemutated",Fe="x-storagemutated-1",Be=kt(null,Tt);class xo{_lock(){return gt(!I.global),++this._reculock,this._reculock!==1||I.global||(I.lockOwnerFor=this),this}_unlock(){if(gt(!I.global),--this._reculock==0)for(I.global||(I.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ct(e[1],e[0])}catch(n){}}return this}_locked(){return this._reculock&&I.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(gt(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new N.DatabaseClosed(r);case"MissingAPIError":throw new N.MissingAPI(r.message,r);default:throw new N.OpenFailed(r)}if(!this.active)throw new N.TransactionInactive;return gt(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=ne(s=>{Rt(s),this._reject(e.error)}),e.onabort=ne(s=>{Rt(s),this.active&&this._reject(new N.Abort(e.error)),this.active=!1,this.on("abort").fire(s)}),e.oncomplete=ne(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Be.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return ue(new N.ReadOnly("Transaction is readonly"));if(!this.active)return ue(new N.TransactionInactive);if(this._locked())return new P((i,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(i,o)},I])});if(r)return je(()=>{var i=new P((o,a)=>{this._lock();const u=n(o,a,this);u&&u.then&&u.then(o,a)});return i.finally(()=>this._unlock()),i._lib=!0,i});var s=new P((i,o)=>{var a=n(i,o,this);a&&a.then&&a.then(i,o)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=P.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=o)})()}var i=n._waitingFor;return new P((o,a)=>{r.then(u=>n._waitingQueue.push(ne(o.bind(null,u))),u=>n._waitingQueue.push(ne(a.bind(null,u)))).finally(()=>{n._waitingFor===i&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new N.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(fe(n,e))return n[e];const r=this.schema[e];if(!r)throw new N.NotFound("Table "+e+" not part of transaction");const s=new this.db.Table(e,r,this);return s.core=this.db.core.table(e),n[e]=s,s}}function sr(t,e,n,r,s,i,o){return{name:t,keyPath:e,unique:n,multi:r,auto:s,compound:i,src:(n&&!o?"&":"")+(r?"*":"")+(s?"++":"")+Es(e)}}function Es(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Ss(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Vr(n,r=>[r.name,r])}}let Pt=t=>{try{return t.only([[]]),Pt=()=>[[]],[[]]}catch(e){return Pt=()=>He,He}};function ir(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Ae(r,e)}(t):e=>Ae(e,t)}function Os(t){return[].slice.call(t)}let Eo=0;function Dt(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function So(t,e,n){function r(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:d,upper:c,lowerOpen:l,upperOpen:f}=u;return d===void 0?c===void 0?null:e.upperBound(c,!!f):c===void 0?e.lowerBound(d,!!l):e.bound(d,c,!!l,!!f)}const{schema:s,hasGetAll:i}=function(u,d){const c=Os(u.objectStoreNames);return{schema:{name:u.name,tables:c.map(l=>d.objectStore(l)).map(l=>{const{keyPath:f,autoIncrement:m}=l,p=z(f),h=f==null,y={},w={name:l.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:h,compound:p,keyPath:f,autoIncrement:m,unique:!0,extractKey:ir(f)},indexes:Os(l.indexNames).map(b=>l.index(b)).map(b=>{const{name:_,unique:x,multiEntry:O,keyPath:S}=b,v={name:_,compound:z(S),keyPath:S,unique:x,multiEntry:O,extractKey:ir(S)};return y[Dt(S)]=v,v}),getIndexByKeyPath:b=>y[Dt(b)]};return y[":id"]=w.primaryKey,f!=null&&(y[Dt(f)]=w.primaryKey),w})},hasGetAll:c.length>0&&"getAll"in d.objectStore(c[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=s.tables.map(u=>function(d){const c=d.name;return{name:c,schema:d,mutate:function({trans:l,type:f,keys:m,values:p,range:h}){return new Promise((y,w)=>{y=ne(y);const b=l.objectStore(c),_=b.keyPath==null,x=f==="put"||f==="add";if(!x&&f!=="delete"&&f!=="deleteRange")throw new Error("Invalid operation type: "+f);const{length:O}=m||p||{length:1};if(m&&p&&m.length!==p.length)throw new Error("Given keys array must have same length as given values array.");if(O===0)return y({numFailures:0,failures:{},results:[],lastResult:void 0});let S;const v=[],B=[];let k=0;const M=ee=>{++k,Rt(ee)};if(f==="deleteRange"){if(h.type===4)return y({numFailures:k,failures:B,results:[],lastResult:void 0});h.type===3?v.push(S=b.clear()):v.push(S=b.delete(r(h)))}else{const[ee,te]=x?_?[p,m]:[p,null]:[m,null];if(x)for(let C=0;C<O;++C)v.push(S=te&&te[C]!==void 0?b[f](ee[C],te[C]):b[f](ee[C])),S.onerror=M;else for(let C=0;C<O;++C)v.push(S=b[f](ee[C])),S.onerror=M}const D=ee=>{const te=ee.target.result;v.forEach((C,R)=>C.error!=null&&(B[R]=C.error)),y({numFailures:k,failures:B,results:f==="delete"?m:v.map(C=>C.result),lastResult:te})};S.onerror=ee=>{M(ee),D(ee)},S.onsuccess=D})},getMany:({trans:l,keys:f})=>new Promise((m,p)=>{m=ne(m);const h=l.objectStore(c),y=f.length,w=new Array(y);let b,_=0,x=0;const O=v=>{const B=v.target;w[B._pos]=B.result,++x===_&&m(w)},S=Ee(p);for(let v=0;v<y;++v)f[v]!=null&&(b=h.get(f[v]),b._pos=v,b.onsuccess=O,b.onerror=S,++_);_===0&&m(w)}),get:({trans:l,key:f})=>new Promise((m,p)=>{m=ne(m);const h=l.objectStore(c).get(f);h.onsuccess=y=>m(y.target.result),h.onerror=Ee(p)}),query:function(l){return f=>new Promise((m,p)=>{m=ne(m);const{trans:h,values:y,limit:w,query:b}=f,_=w===1/0?void 0:w,{index:x,range:O}=b,S=h.objectStore(c),v=x.isPrimaryKey?S:S.index(x.name),B=r(O);if(w===0)return m({result:[]});if(l){const k=y?v.getAll(B,_):v.getAllKeys(B,_);k.onsuccess=M=>m({result:M.target.result}),k.onerror=Ee(p)}else{let k=0;const M=y||!("openKeyCursor"in v)?v.openCursor(B):v.openKeyCursor(B),D=[];M.onsuccess=ee=>{const te=M.result;return te?(D.push(y?te.value:te.primaryKey),++k===w?m({result:D}):void te.continue()):m({result:D})},M.onerror=Ee(p)}})}(i),openCursor:function({trans:l,values:f,query:m,reverse:p,unique:h}){return new Promise((y,w)=>{y=ne(y);const{index:b,range:_}=m,x=l.objectStore(c),O=b.isPrimaryKey?x:x.index(b.name),S=p?h?"prevunique":"prev":h?"nextunique":"next",v=f||!("openKeyCursor"in O)?O.openCursor(r(_),S):O.openKeyCursor(r(_),S);v.onerror=Ee(w),v.onsuccess=ne(B=>{const k=v.result;if(!k)return void y(null);k.___id=++Eo,k.done=!1;const M=k.continue.bind(k);let D=k.continuePrimaryKey;D&&(D=D.bind(k));const ee=k.advance.bind(k),te=()=>{throw new Error("Cursor not stopped")};k.trans=l,k.stop=k.continue=k.continuePrimaryKey=k.advance=()=>{throw new Error("Cursor not started")},k.fail=ne(w),k.next=function(){let C=1;return this.start(()=>C--?this.continue():this.stop()).then(()=>this)},k.start=C=>{const R=new Promise((T,A)=>{T=ne(T),v.onerror=Ee(A),k.fail=A,k.stop=j=>{k.stop=k.continue=k.continuePrimaryKey=k.advance=te,T(j)}}),E=()=>{if(v.result)try{C()}catch(T){k.fail(T)}else k.done=!0,k.start=()=>{throw new Error("Cursor behind last entry")},k.stop()};return v.onsuccess=ne(T=>{v.onsuccess=E,E()}),k.continue=M,k.continuePrimaryKey=D,k.advance=ee,E(),R},y(k)},w)})},count({query:l,trans:f}){const{index:m,range:p}=l;return new Promise((h,y)=>{const w=f.objectStore(c),b=m.isPrimaryKey?w:w.index(m.name),_=r(p),x=_?b.count(_):b.count();x.onsuccess=ne(O=>h(O.target.result)),x.onerror=Ee(y)})}}}(u)),a={};return o.forEach(u=>a[u.name]=u),{stack:"dbcore",transaction:t.transaction.bind(t),table(u){if(!a[u])throw new Error(`Table '${u}' not found`);return a[u]},MIN_KEY:-1/0,MAX_KEY:Pt(e),schema:s}}function or({_novip:t},e){const n=e.db,r=function(s,i,{IDBKeyRange:o,indexedDB:a},u){return{dbcore:function(c,l){return l.reduce((f,{create:m})=>q(q({},f),m(f)),c)}(So(i,o,u),s.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(s=>{const i=s.name;t.core.schema.tables.some(o=>o.name===i)&&(s.core=t.core.table(i),t[i]instanceof t.Table&&(t[i].core=s.core))})}function ln({_novip:t},e,n,r){n.forEach(s=>{const i=r[s];e.forEach(o=>{const a=Tn(o,s);(!a||"value"in a&&a.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?Oe(o,s,{get(){return this.table(s)},set(u){qr(this,s,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):o[s]=new t.Table(s,i))})})}function ar({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Oo(t,e){return t._cfg.version-e._cfg.version}function Ao(t,e,n,r){const s=t._dbSchema,i=t._createTransaction("readwrite",t._storeNames,s);i.create(n),i._completion.catch(r);const o=i._reject.bind(i),a=I.transless||I;je(()=>{I.trans=i,I.transless=a,e===0?(H(s).forEach(u=>{cr(n,u,s[u].primKey,s[u].indexes)}),or(t,n),P.follow(()=>t.on.populate.fire(i)).catch(o)):function({_novip:u},d,c,l){const f=[],m=u._versions;let p=u._dbSchema=lr(u,u.idbdb,l),h=!1;const y=m.filter(b=>b._cfg.version>=d);function w(){return f.length?P.resolve(f.shift()(c.idbtrans)).then(w):P.resolve()}return y.forEach(b=>{f.push(()=>{const _=p,x=b._cfg.dbschema;dr(u,_,l),dr(u,x,l),p=u._dbSchema=x;const O=As(_,x);O.add.forEach(v=>{cr(l,v[0],v[1].primKey,v[1].indexes)}),O.change.forEach(v=>{if(v.recreate)throw new N.Upgrade("Not yet support for changing primary key");{const B=l.objectStore(v.name);v.add.forEach(k=>ur(B,k)),v.change.forEach(k=>{B.deleteIndex(k.name),ur(B,k)}),v.del.forEach(k=>B.deleteIndex(k))}});const S=b._cfg.contentUpgrade;if(S&&b._cfg.version>d){or(u,l),c._memoizedTables={},h=!0;let v=Wr(x);O.del.forEach(D=>{v[D]=_[D]}),ar(u,[u.Transaction.prototype]),ln(u,[u.Transaction.prototype],H(v),v),c.schema=v;const B=jn(S);let k;B&&at();const M=P.follow(()=>{if(k=S(c),k&&B){var D=Ce.bind(null,null);k.then(D,D)}});return k&&typeof k.then=="function"?P.resolve(k):M.then(()=>k)}}),f.push(_=>{(!h||!mo)&&function(x,O){[].slice.call(O.db.objectStoreNames).forEach(S=>x[S]==null&&O.db.deleteObjectStore(S))}(b._cfg.dbschema,_),ar(u,[u.Transaction.prototype]),ln(u,[u.Transaction.prototype],u._storeNames,u._dbSchema),c.schema=u._dbSchema})}),w().then(()=>{var b,_;_=l,H(b=p).forEach(x=>{_.db.objectStoreNames.contains(x)||cr(_,x,b[x].primKey,b[x].indexes)})})}(t,e,i,n).catch(o)})}function As(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const s=t[r],i=e[r];if(s){const o={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!rn)o.recreate=!0,n.change.push(o);else{const a=s.idxByName,u=i.idxByName;let d;for(d in a)u[d]||o.del.push(d);for(d in u){const c=a[d],l=u[d];c?c.src!==l.src&&o.change.push(l):o.add.push(l)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,i])}return n}function cr(t,e,n,r){const s=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(i=>ur(s,i)),s}function ur(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function lr(t,e,n){const r={};return qt(e.objectStoreNames,0).forEach(s=>{const i=n.objectStore(s);let o=i.keyPath;const a=sr(Es(o),o||"",!1,!1,!!i.autoIncrement,o&&typeof o!="string",!0),u=[];for(let c=0;c<i.indexNames.length;++c){const l=i.index(i.indexNames[c]);o=l.keyPath;var d=sr(l.name,o,!!l.unique,!!l.multiEntry,!1,o&&typeof o!="string",!1);u.push(d)}r[s]=Ss(s,a,u)}),r}function dr({_novip:t},e,n){const r=n.db.objectStoreNames;for(let s=0;s<r.length;++s){const i=r[s],o=n.objectStore(i);t._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const u=o.indexNames[a],d=o.index(u).keyPath,c=typeof d=="string"?d:"["+qt(d).join("+")+"]";if(e[i]){const l=e[i].idxByName[c];l&&(l.name=u,delete e[i].idxByName[c],e[i].idxByName[u]=l)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&U.WorkerGlobalScope&&U instanceof U.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class ko{_parseStoresSpec(e,n){H(e).forEach(r=>{if(e[r]!==null){var s=e[r].split(",").map((o,a)=>{const u=(o=o.trim()).replace(/([&*]|\+\+)/g,""),d=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return sr(u,d||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),z(d),a===0)}),i=s.shift();if(i.multi)throw new N.Schema("Primary key cannot be multi-valued");s.forEach(o=>{if(o.auto)throw new N.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new N.Schema("Index must have a name and cannot be an empty string")}),n[r]=Ss(r,i,s)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?G(this._cfg.storesSource,e):e;const r=n._versions,s={};let i={};return r.forEach(o=>{G(s,o._cfg.storesSource),i=o._cfg.dbschema={},o._parseStoresSpec(s,i)}),n._dbSchema=i,ar(n,[n._allTables,n,n.Transaction.prototype]),ln(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],H(i),i),n._storeNames=H(i),this}upgrade(e){return this._cfg.contentUpgrade=Bn(this._cfg.contentUpgrade||X,e),this}}function fr(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Ve(sn,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function hr(t){return t&&typeof t.databases=="function"}function pr(t){return je(function(){return I.letThrough=!0,t()})}function Co(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function Ro(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?ue(e.dbOpenError):t);xe&&(e.openCanceller._stackHolder=Ke()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function s(){if(e.openCanceller!==r)throw new N.DatabaseClosed("db.open() was cancelled")}let i=e.dbReadyResolve,o=null,a=!1;const u=()=>new P((d,c)=>{if(s(),!n)throw new N.MissingAPI;const l=t.name,f=e.autoSchema?n.open(l):n.open(l,Math.round(10*t.verno));if(!f)throw new N.MissingAPI;f.onerror=Ee(c),f.onblocked=ne(t._fireOnBlocked),f.onupgradeneeded=ne(m=>{if(o=f.transaction,e.autoSchema&&!t._options.allowEmptyDB){f.onerror=Rt,o.abort(),f.result.close();const h=n.deleteDatabase(l);h.onsuccess=h.onerror=ne(()=>{c(new N.NoSuchDatabase(`Database ${l} doesnt exist`))})}else{o.onerror=Ee(c);var p=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;a=p<1,t._novip.idbdb=f.result,Ao(t,p/10,o,c)}},c),f.onsuccess=ne(()=>{o=null;const m=t._novip.idbdb=f.result,p=qt(m.objectStoreNames);if(p.length>0)try{const y=m.transaction((h=p).length===1?h[0]:h,"readonly");e.autoSchema?function({_novip:w},b,_){w.verno=b.version/10;const x=w._dbSchema=lr(0,b,_);w._storeNames=qt(b.objectStoreNames,0),ln(w,[w._allTables],H(x),x)}(t,m,y):(dr(t,t._dbSchema,y),function(w,b){const _=As(lr(0,w.idbdb,b),w._dbSchema);return!(_.add.length||_.change.some(x=>x.add.length||x.change.length))}(t,y)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),or(t,y)}catch(y){}var h;At.push(t),m.onversionchange=ne(y=>{e.vcFired=!0,t.on("versionchange").fire(y)}),m.onclose=ne(y=>{t.on("close").fire(y)}),a&&function({indexedDB:y,IDBKeyRange:w},b){!hr(y)&&b!==sn&&fr(y,w).put({name:b}).catch(X)}(t._deps,l),d()},c)}).catch(d=>d&&d.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),u()):P.reject(d));return P.race([r,(typeof navigator=="undefined"?P.resolve():Co()).then(u)]).then(()=>(s(),e.onReadyBeingFired=[],P.resolve(pr(()=>t.on.ready.fire(t.vip))).then(function d(){if(e.onReadyBeingFired.length>0){let c=e.onReadyBeingFired.reduce(Bn,X);return e.onReadyBeingFired=[],P.resolve(pr(()=>c(t.vip))).then(d)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(d=>{e.dbOpenError=d;try{o&&o.abort()}catch(c){}return r===e.openCanceller&&t._close(),ue(d)}).finally(()=>{e.openComplete=!0,i()})}function mr(t){var e=i=>t.next(i),n=s(e),r=s(i=>t.throw(i));function s(i){return o=>{var a=i(o),u=a.value;return a.done?u:u&&typeof u.then=="function"?u.then(n,r):z(u)?Promise.all(u).then(n,r):n(u)}}return s(e)()}function To(t,e,n){var r=arguments.length;if(r<2)throw new N.InvalidArgument("Too few arguments");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];return n=s.pop(),[t,Jr(s),n]}function ks(t,e,n,r,s){return P.resolve().then(()=>{const i=I.transless||I,o=t._createTransaction(e,n,t._dbSchema,r),a={trans:o,transless:i};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(l){return l.name===Fn.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ks(t,e,n,null,s))):ue(l)}const u=jn(s);let d;u&&at();const c=P.follow(()=>{if(d=s.call(o,o),d)if(u){var l=Ce.bind(null,null);d.then(l,l)}else typeof d.next=="function"&&typeof d.throw=="function"&&(d=mr(d))},a);return(d&&typeof d.then=="function"?P.resolve(d).then(l=>o.active?l:ue(new N.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):c.then(()=>d)).then(l=>(r&&o._resolve(),o._completion.then(()=>l))).catch(l=>(o._reject(l),ue(l)))})}function dn(t,e,n){const r=z(t)?t.slice():[t];for(let s=0;s<n;++s)r.push(e);return r}const Po={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return Z(q({},t),{table(e){const n=t.table(e),{schema:r}=n,s={},i=[];function o(c,l,f){const m=Dt(c),p=s[m]=s[m]||[],h=c==null?0:typeof c=="string"?1:c.length,y=l>0,w=Z(q({},f),{isVirtual:y,keyTail:l,keyLength:h,extractKey:ir(c),unique:!y&&f.unique});return p.push(w),w.isPrimaryKey||i.push(w),h>1&&o(h===2?c[0]:c.slice(0,h-1),l+1,f),p.sort((b,_)=>b.keyTail-_.keyTail),w}const a=o(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[a];for(const c of r.indexes)o(c.keyPath,0,c);function u(c){const l=c.query.index;return l.isVirtual?Z(q({},c),{query:{index:l,range:(f=c.query.range,m=l.keyTail,{type:f.type===1?2:f.type,lower:dn(f.lower,f.lowerOpen?t.MAX_KEY:t.MIN_KEY,m),lowerOpen:!0,upper:dn(f.upper,f.upperOpen?t.MIN_KEY:t.MAX_KEY,m),upperOpen:!0})}}):c;var f,m}return Z(q({},n),{schema:Z(q({},r),{primaryKey:a,indexes:i,getIndexByKeyPath:function(c){const l=s[Dt(c)];return l&&l[0]}}),count:c=>n.count(u(c)),query:c=>n.query(u(c)),openCursor(c){const{keyTail:l,isVirtual:f,keyLength:m}=c.query.index;return f?n.openCursor(u(c)).then(p=>p&&function(h){return Object.create(h,{continue:{value:function(w){w!=null?h.continue(dn(w,c.reverse?t.MAX_KEY:t.MIN_KEY,l)):c.unique?h.continue(h.key.slice(0,m).concat(c.reverse?t.MIN_KEY:t.MAX_KEY,l)):h.continue()}},continuePrimaryKey:{value(w,b){h.continuePrimaryKey(dn(w,t.MAX_KEY,l),b)}},primaryKey:{get:()=>h.primaryKey},key:{get(){const w=h.key;return m===1?w[0]:w.slice(0,m)}},value:{get:()=>h.value}})}(p)):n.openCursor(c)}})}})}};function yr(t,e,n,r){return n=n||{},r=r||"",H(t).forEach(s=>{if(fe(e,s)){var i=t[s],o=e[s];if(typeof i=="object"&&typeof o=="object"&&i&&o){const a=Dn(i);a!==Dn(o)?n[r+s]=e[s]:a==="Object"?yr(i,o,n,r+s+"."):i!==o&&(n[r+s]=e[s])}else i!==o&&(n[r+s]=e[s])}else n[r+s]=void 0}),H(e).forEach(s=>{fe(t,s)||(n[r+s]=e[s])}),n}const Do={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>Z(q({},t),{table(e){const n=t.table(e),{primaryKey:r}=n.schema;return Z(q({},n),{mutate(i){const o=I.trans,{deleting:a,creating:u,updating:d}=o.table(e).hook;switch(i.type){case"add":if(u.fire===X)break;return o._promise("readwrite",()=>c(i),!0);case"put":if(u.fire===X&&d.fire===X)break;return o._promise("readwrite",()=>c(i),!0);case"delete":if(a.fire===X)break;return o._promise("readwrite",()=>c(i),!0);case"deleteRange":if(a.fire===X)break;return o._promise("readwrite",()=>function(f){return l(f.trans,f.range,1e4)}(i),!0)}return n.mutate(i);function c(f){const m=I.trans,p=f.keys||function(h,y){return y.type==="delete"?y.keys:y.keys||y.values.map(h.extractKey)}(r,f);if(!p)throw new Error("Keys missing");return(f=f.type==="add"||f.type==="put"?Z(q({},f),{keys:p}):q({},f)).type!=="delete"&&(f.values=[...f.values]),f.keys&&(f.keys=[...f.keys]),function(h,y,w){return y.type==="add"?Promise.resolve([]):h.getMany({trans:y.trans,keys:w,cache:"immutable"})}(n,f,p).then(h=>{const y=p.map((w,b)=>{const _=h[b],x={onerror:null,onsuccess:null};if(f.type==="delete")a.fire.call(x,w,_,m);else if(f.type==="add"||_===void 0){const O=u.fire.call(x,w,f.values[b],m);w==null&&O!=null&&(w=O,f.keys[b]=w,r.outbound||_e(f.values[b],r.keyPath,w))}else{const O=yr(_,f.values[b]),S=d.fire.call(x,O,w,_,m);if(S){const v=f.values[b];Object.keys(S).forEach(B=>{fe(v,B)?v[B]=S[B]:_e(v,B,S[B])})}}return x});return n.mutate(f).then(({failures:w,results:b,numFailures:_,lastResult:x})=>{for(let O=0;O<p.length;++O){const S=b?b[O]:p[O],v=y[O];S==null?v.onerror&&v.onerror(w[O]):v.onsuccess&&v.onsuccess(f.type==="put"&&h[O]?f.values[O]:S)}return{failures:w,results:b,numFailures:_,lastResult:x}}).catch(w=>(y.forEach(b=>b.onerror&&b.onerror(w)),Promise.reject(w)))})}function l(f,m,p){return n.query({trans:f,values:!1,query:{index:r,range:m},limit:p}).then(({result:h})=>c({type:"delete",keys:h,trans:f}).then(y=>y.numFailures>0?Promise.reject(y.failures[0]):h.length<p?{failures:[],numFailures:0,lastResult:void 0}:l(f,Z(q({},m),{lower:h[h.length-1],lowerOpen:!0}),p)))}}})}})};function Cs(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let s=0,i=0;s<e.keys.length&&i<t.length;++s)pe(e.keys[s],t[i])===0&&(r.push(n?bt(e.values[s]):e.values[s]),++i);return r.length===t.length?r:null}catch(r){return null}}const Io={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return Z(q({},n),{getMany:r=>{if(!r.cache)return n.getMany(r);const s=Cs(r.keys,r.trans._cache,r.cache==="clone");return s?P.resolve(s):n.getMany(r).then(i=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?bt(i):i},i))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))})}})};function gr(t){return!("from"in t)}const Te=function(t,e){if(!this){const n=new Te;return t&&"d"in t&&G(n,t),n}G(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function It(t,e,n){const r=pe(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(gr(t))return G(t,{from:e,to:n,d:1});const s=t.l,i=t.r;if(pe(n,t.from)<0)return s?It(s,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Rs(t);if(pe(e,t.to)>0)return i?It(i,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Rs(t);pe(e,t.from)<0&&(t.from=e,t.l=null,t.d=i?i.d+1:1),pe(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;s&&!t.l&&fn(t,s),i&&o&&fn(t,i)}function fn(t,e){gr(e)||function n(r,{from:s,to:i,l:o,r:a}){It(r,s,i),o&&n(r,o),a&&n(r,a)}(t,e)}function jo(t,e){const n=br(e);let r=n.next();if(r.done)return!1;let s=r.value;const i=br(t);let o=i.next(s.from),a=o.value;for(;!r.done&&!o.done;){if(pe(a.from,s.to)<=0&&pe(a.to,s.from)>=0)return!0;pe(s.from,a.from)<0?s=(r=n.next(a.from)).value:a=(o=i.next(s.from)).value}return!1}function br(t){let e=gr(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&pe(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||pe(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Rs(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),s=r>1?"r":r<-1?"l":"";if(s){const i=s==="r"?"l":"r",o=q({},t),a=t[s];t.from=a.from,t.to=a.to,t[s]=a[s],o[s]=a[i],t[i]=o,o.d=Ts(o)}t.d=Ts(t)}function Ts({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}he(Te.prototype,{add(t){return fn(this,t),this},addKey(t){return It(this,t,t),this},addKeys(t){return t.forEach(e=>It(this,e,e)),this},[In](){return br(this)}});const No={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Te(t.MIN_KEY,t.MAX_KEY);return Z(q({},t),{table:r=>{const s=t.table(r),{schema:i}=s,{primaryKey:o}=i,{extractKey:a,outbound:u}=o,d=Z(q({},s),{mutate:f=>{const m=f.trans,p=m.mutatedParts||(m.mutatedParts={}),h=S=>{const v=`idb://${e}/${r}/${S}`;return p[v]||(p[v]=new Te)},y=h(""),w=h(":dels"),{type:b}=f;let[_,x]=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[];const O=f.trans._cache;return s.mutate(f).then(S=>{if(z(_)){b!=="delete"&&(_=S.results),y.addKeys(_);const v=Cs(_,O);v||b==="add"||w.addKeys(_),(v||x)&&function(B,k,M,D){function ee(te){const C=B(te.name||"");function R(T){return T!=null?te.extractKey(T):null}const E=T=>te.multiEntry&&z(T)?T.forEach(A=>C.addKey(A)):C.addKey(T);(M||D).forEach((T,A)=>{const j=M&&R(M[A]),$=D&&R(D[A]);pe(j,$)!==0&&(j!=null&&E(j),$!=null&&E($))})}k.indexes.forEach(ee)}(h,i,v,x)}else if(_){const v={from:_.lower,to:_.upper};w.add(v),y.add(v)}else y.add(n),w.add(n),i.indexes.forEach(v=>h(v.name).add(n));return S})}}),c=({query:{index:f,range:m}})=>{var p,h;return[f,new Te((p=m.lower)!==null&&p!==void 0?p:t.MIN_KEY,(h=m.upper)!==null&&h!==void 0?h:t.MAX_KEY)]},l={get:f=>[o,new Te(f.key)],getMany:f=>[o,new Te().addKeys(f.keys)],count:c,query:c,openCursor:c};return H(l).forEach(f=>{d[f]=function(m){const{subscr:p}=I;if(p){const h=x=>{const O=`idb://${e}/${r}/${x}`;return p[O]||(p[O]=new Te)},y=h(""),w=h(":dels"),[b,_]=l[f](m);if(h(b.name||"").add(_),!b.isPrimaryKey){if(f!=="count"){const x=f==="query"&&u&&m.values&&s.query(Z(q({},m),{values:!1}));return s[f].apply(this,arguments).then(O=>{if(f==="query"){if(u&&m.values)return x.then(({result:v})=>(y.addKeys(v),O));const S=m.values?O.result.map(a):O.result;m.values?y.addKeys(S):w.addKeys(S)}else if(f==="openCursor"){const S=O,v=m.values;return S&&Object.create(S,{key:{get:()=>(w.addKey(S.primaryKey),S.key)},primaryKey:{get(){const B=S.primaryKey;return w.addKey(B),B}},value:{get:()=>(v&&y.addKey(S.primaryKey),S.value)}})}return O})}w.add(n)}}return s[f].apply(this,arguments)}}),d}})}};class Ve{constructor(e,n){this._middlewares={},this.verno=0;const r=Ve.dependencies;this._options=n=q({addons:Ve.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:s}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:X,dbReadyPromise:null,cancelOpen:X,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;i.dbReadyPromise=new P(a=>{i.dbReadyResolve=a}),i.openCanceller=new P((a,u)=>{i.cancelOpen=u}),this._state=i,this.name=e,this.on=kt(this,"populate","blocked","versionchange","close",{ready:[Bn,X]}),this.on.ready.subscribe=Hr(this.on.ready.subscribe,a=>(u,d)=>{Ve.vip(()=>{const c=this._state;if(c.openComplete)c.dbOpenError||P.resolve().then(u),d&&a(u);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(u),d&&a(u);else{a(u);const l=this;d||a(function f(){l.on.ready.unsubscribe(u),l.on.ready.unsubscribe(f)})}})}),this.Collection=(o=this,Ct(bo.prototype,function(a,u){this.db=o;let d=ys,c=null;if(u)try{d=u()}catch(p){c=p}const l=a._ctx,f=l.table,m=f.hook.reading.fire;this._ctx={table:f,index:l.index,isPrimKey:!l.index||f.schema.primKey.keyPath&&l.index===f.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:l.or,valueMapper:m!==_t?m:null}})),this.Table=function(a){return Ct(go.prototype,function(u,d,c){this.db=a,this._tx=c,this.name=u,this.schema=d,this.hook=a._allTables[u]?a._allTables[u].hook:kt(null,{creating:[so,X],reading:[ro,_t],updating:[oo,X],deleting:[io,X]})})}(this),this.Transaction=function(a){return Ct(xo.prototype,function(u,d,c,l,f){this.db=a,this.mode=u,this.storeNames=d,this.schema=c,this.chromeTransactionDurability=l,this.idbtrans=null,this.on=kt(this,"complete","error","abort"),this.parent=f||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new P((m,p)=>{this._resolve=m,this._reject=p}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var p=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):p&&this.idbtrans&&this.idbtrans.abort(),ue(m)})})}(this),this.Version=function(a){return Ct(ko.prototype,function(u){this.db=a,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return Ct(xs.prototype,function(u,d,c){this.db=a,this._ctx={table:u,index:d===":id"?null:d,or:c};const l=a._deps.indexedDB;if(!l)throw new N.MissingAPI;this._cmp=this._ascending=l.cmp.bind(l),this._descending=(f,m)=>l.cmp(m,f),this._max=(f,m)=>l.cmp(f,m)>0?f:m,this._min=(f,m)=>l.cmp(f,m)<0?f:m,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Pt(n.IDBKeyRange),this._createTransaction=(a,u,d,c)=>new this.Transaction(a,u,d,this._options.chromeTransactionDurability,c),this._fireOnBlocked=a=>{this.on("blocked").fire(a),At.filter(u=>u.name===this.name&&u!==this&&!u._state.vcFired).map(u=>u.on("versionchange").fire(a))},this.use(Po),this.use(Do),this.use(No),this.use(Io),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new N.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new N.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(s=>s._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Oo),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||I.letThrough||this._vip)?e():new P((n,r)=>{if(this._state.openComplete)return r(new N.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new N.DatabaseClosed);this.open().catch(X)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:s}){s&&this.unuse({stack:e,name:s});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:n,level:r==null?10:r,name:s}),i.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(s=>r?s.create!==r:!!n&&s.name!==n)),this}open(){return Ro(this)}_close(){const e=this._state,n=At.indexOf(this);if(n>=0&&At.splice(n,1),this.idbdb){try{this.idbdb.close()}catch(r){}this._novip.idbdb=null}e.dbReadyPromise=new P(r=>{e.dbReadyResolve=r}),e.openCanceller=new P((r,s)=>{e.cancelOpen=s})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new N.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new P((r,s)=>{const i=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=ne(()=>{(function({indexedDB:a,IDBKeyRange:u},d){!hr(a)&&d!==sn&&fr(a,u).delete(d).catch(X)})(this._deps,this.name),r()}),o.onerror=Ee(s),o.onblocked=this._fireOnBlocked};if(e)throw new N.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return H(this._allTables).map(e=>this._allTables[e])}transaction(){const e=To.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let s=I.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);const i=e.indexOf("?")!==-1;let o,a;e=e.replace("!","").replace("?","");try{if(a=n.map(d=>{var c=d instanceof this.Table?d.name:d;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===Zn)o=Zn;else{if(e!="rw"&&e!=er)throw new N.InvalidArgument("Invalid transaction mode: "+e);o=er}if(s){if(s.mode===Zn&&o===er){if(!i)throw new N.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&a.forEach(d=>{if(s&&s.storeNames.indexOf(d)===-1){if(!i)throw new N.SubTransaction("Table "+d+" not included in parent transaction.");s=null}}),i&&s&&!s.active&&(s=null)}}catch(d){return s?s._promise(null,(c,l)=>{l(d)}):ue(d)}const u=ks.bind(null,this,o,a,s,r);return s?s._promise(o,u,"lock"):I.trans?ct(I.transless,()=>this._whenReady(u)):this._whenReady(u)}table(e){if(!fe(this._allTables,e))throw new N.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const $o=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable";class Fo{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[$o](){return this}}function Ps(t,e){return H(e).forEach(n=>{fn(t[n]||(t[n]=new Te),e[n])}),t}function Bo(t){let e,n=!1;const r=new Fo(s=>{const i=jn(t);let o=!1,a={},u={};const d={get closed(){return o},unsubscribe:()=>{o=!0,Be.storagemutated.unsubscribe(m)}};s.start&&s.start(d);let c=!1,l=!1;function f(){return H(u).some(h=>a[h]&&jo(a[h],u[h]))}const m=h=>{Ps(a,h),f()&&p()},p=()=>{if(c||o)return;a={};const h={},y=function(w){i&&at();const b=()=>je(t,{subscr:w,trans:null}),_=I.trans?ct(I.transless,b):b();return i&&_.then(Ce,Ce),_}(h);l||(Be(Tt,m),l=!0),c=!0,Promise.resolve(y).then(w=>{n=!0,e=w,c=!1,o||(f()?p():(a={},u=h,s.next&&s.next(w)))},w=>{c=!1,n=!1,s.error&&s.error(w),d.unsubscribe()})};return p(),d});return r.hasValue=()=>n,r.getValue=()=>e,r}let wr;try{wr={indexedDB:U.indexedDB||U.mozIndexedDB||U.webkitIndexedDB||U.msIndexedDB,IDBKeyRange:U.IDBKeyRange||U.webkitIDBKeyRange}}catch(t){wr={indexedDB:null,IDBKeyRange:null}}const We=Ve;function hn(t){let e=Pe;try{Pe=!0,Be.storagemutated.fire(t)}finally{Pe=e}}he(We,Z(q({},zt),{delete:t=>new We(t,{addons:[]}).delete(),exists:t=>new We(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return hr(e)?Promise.resolve(e.databases()).then(r=>r.map(s=>s.name).filter(s=>s!==sn)):fr(e,n).toCollection().primaryKeys()}(We.dependencies).then(t)}catch(e){return ue(new N.MissingAPI)}},defineClass:()=>function(t){G(this,t)},ignoreTransaction:t=>I.trans?ct(I.transless,t):t(),vip:pr,async:function(t){return function(){try{var e=mr(t.apply(this,arguments));return e&&typeof e.then=="function"?e:P.resolve(e)}catch(n){return ue(n)}}},spawn:function(t,e,n){try{var r=mr(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:P.resolve(r)}catch(s){return ue(s)}},currentTransaction:{get:()=>I.trans||null},waitFor:function(t,e){const n=P.resolve(typeof t=="function"?We.ignoreTransaction(t):t).timeout(e||6e4);return I.trans?I.trans.waitFor(n):n},Promise:P,debug:{get:()=>xe,set:t=>{Gr(t,t==="dexie"?()=>!0:ms)}},derive:rt,extend:G,props:he,override:Hr,Events:kt,on:Be,liveQuery:Bo,extendObservabilitySet:Ps,getByKeyPath:Ae,setByKeyPath:_e,delByKeyPath:function(t,e){typeof e=="string"?_e(t,e,void 0):"length"in e&&[].map.call(e,function(n){_e(t,n,void 0)})},shallowClone:Wr,deepClone:bt,getObjectDiff:yr,cmp:pe,asap:zr,minKey:Qn,addons:[],connections:At,errnames:Fn,dependencies:wr,semVer:hs,version:hs.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))})),We.maxKey=Pt(We.dependencies.IDBKeyRange),typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(Be(Tt,t=>{if(!Pe){let e;rn?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Fe,!0,!0,t)):e=new CustomEvent(Fe,{detail:t}),Pe=!0,dispatchEvent(e),Pe=!1}}),addEventListener(Fe,({detail:t})=>{Pe||hn(t)}));let Pe=!1;if(typeof BroadcastChannel!="undefined"){const t=new BroadcastChannel(Fe);typeof t.unref=="function"&&t.unref(),Be(Tt,e=>{Pe||t.postMessage(e)}),t.onmessage=e=>{e.data&&hn(e.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){Be(Tt,e=>{try{Pe||(typeof localStorage!="undefined"&&localStorage.setItem(Fe,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Fe,changedParts:e})))}catch(n){}}),typeof addEventListener!="undefined"&&addEventListener("storage",e=>{if(e.key===Fe){const n=JSON.parse(e.newValue);n&&hn(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Fe&&hn(e.changedParts)})}P.rejectionMapper=function(t,e){if(!t||t instanceof it||t instanceof TypeError||t instanceof SyntaxError||!t.name||!es[t.name])return t;var n=new es[t.name](e||t.message,t);return"stack"in t&&Oe(n,"stack",{get:function(){return this.inner.stack}}),n},Gr(xe,ms);function Ds(t,e){return function(){return t.apply(e,arguments)}}const{toString:Mo}=Object.prototype,{getPrototypeOf:_r}=Object,{iterator:pn,toStringTag:Is}=Symbol,mn=(t=>e=>{const n=Mo.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ve=t=>(t=t.toLowerCase(),e=>mn(e)===t),yn=t=>e=>typeof e===t,{isArray:dt}=Array,ft=yn("undefined");function jt(t){return t!==null&&!ft(t)&&t.constructor!==null&&!ft(t.constructor)&&ye(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const js=ve("ArrayBuffer");function Ko(t){let e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&js(t.buffer),e}const Uo=yn("string"),ye=yn("function"),Ns=yn("number"),Nt=t=>t!==null&&typeof t=="object",Lo=t=>t===!0||t===!1,gn=t=>{if(mn(t)!=="object")return!1;const e=_r(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Is in t)&&!(pn in t)},qo=t=>{if(!Nt(t)||jt(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch(e){return!1}},Ho=ve("Date"),zo=ve("File"),Vo=ve("Blob"),Wo=ve("FileList"),Jo=t=>Nt(t)&&ye(t.pipe),Yo=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ye(t.append)&&((e=mn(t))==="formdata"||e==="object"&&ye(t.toString)&&t.toString()==="[object FormData]"))},Go=ve("URLSearchParams"),[Xo,Qo,Zo,ea]=["ReadableStream","Request","Response","Headers"].map(ve),ta=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $t(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t=="undefined")return;let r,s;if(typeof t!="object"&&(t=[t]),dt(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(jt(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function $s(t,e){if(jt(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Je=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,Fs=t=>!ft(t)&&t!==Je;function vr(){const{caseless:t,skipUndefined:e}=Fs(this)&&this||{},n={},r=(s,i)=>{const o=t&&$s(n,i)||i;gn(n[o])&&gn(s)?n[o]=vr(n[o],s):gn(s)?n[o]=vr({},s):dt(s)?n[o]=s.slice():(!e||!ft(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&$t(arguments[s],r);return n}const na=(t,e,n,{allOwnKeys:r}={})=>($t(e,(s,i)=>{n&&ye(s)?t[i]=Ds(s,n):t[i]=s},{allOwnKeys:r}),t),ra=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),sa=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},ia=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&_r(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},oa=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},aa=t=>{if(!t)return null;if(dt(t))return t;let e=t.length;if(!Ns(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},ca=(t=>e=>t&&e instanceof t)(typeof Uint8Array!="undefined"&&_r(Uint8Array)),ua=(t,e)=>{const r=(t&&t[pn]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},la=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},da=ve("HTMLFormElement"),fa=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Bs=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),ha=ve("RegExp"),Ms=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};$t(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},pa=t=>{Ms(t,(e,n)=>{if(ye(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ye(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},ma=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return dt(t)?r(t):r(String(t).split(e)),n},ya=()=>{},ga=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function ba(t){return!!(t&&ye(t.append)&&t[Is]==="FormData"&&t[pn])}const wa=t=>{const e=new Array(10),n=(r,s)=>{if(Nt(r)){if(e.indexOf(r)>=0)return;if(jt(r))return r;if(!("toJSON"in r)){e[s]=r;const i=dt(r)?[]:{};return $t(r,(o,a)=>{const u=n(o,s+1);!ft(u)&&(i[a]=u)}),e[s]=void 0,i}}return r};return n(t,0)},_a=ve("AsyncFunction"),va=t=>t&&(Nt(t)||ye(t))&&ye(t.then)&&ye(t.catch),Ks=((t,e)=>t?setImmediate:e?((n,r)=>(Je.addEventListener("message",({source:s,data:i})=>{s===Je&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Je.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ye(Je.postMessage)),xa=typeof queueMicrotask!="undefined"?queueMicrotask.bind(Je):typeof process!="undefined"&&process.nextTick||Ks;var g={isArray:dt,isArrayBuffer:js,isBuffer:jt,isFormData:Yo,isArrayBufferView:Ko,isString:Uo,isNumber:Ns,isBoolean:Lo,isObject:Nt,isPlainObject:gn,isEmptyObject:qo,isReadableStream:Xo,isRequest:Qo,isResponse:Zo,isHeaders:ea,isUndefined:ft,isDate:Ho,isFile:zo,isBlob:Vo,isRegExp:ha,isFunction:ye,isStream:Jo,isURLSearchParams:Go,isTypedArray:ca,isFileList:Wo,forEach:$t,merge:vr,extend:na,trim:ta,stripBOM:ra,inherits:sa,toFlatObject:ia,kindOf:mn,kindOfTest:ve,endsWith:oa,toArray:aa,forEachEntry:ua,matchAll:la,isHTMLForm:da,hasOwnProperty:Bs,hasOwnProp:Bs,reduceDescriptors:Ms,freezeMethods:pa,toObjectSet:ma,toCamelCase:fa,noop:ya,toFiniteNumber:ga,findKey:$s,global:Je,isContextDefined:Fs,isSpecCompliantForm:ba,toJSONObject:wa,isAsyncFn:_a,isThenable:va,setImmediate:Ks,asap:xa,isIterable:t=>t!=null&&ye(t[pn])};function L(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}g.inherits(L,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:g.toJSONObject(this.config),code:this.code,status:this.status}}});const Us=L.prototype,Ls={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ls[t]={value:t}}),Object.defineProperties(L,Ls),Object.defineProperty(Us,"isAxiosError",{value:!0}),L.from=(t,e,n,r,s,i)=>{const o=Object.create(Us);g.toFlatObject(t,o,function(c){return c!==Error.prototype},d=>d!=="isAxiosError");const a=t&&t.message?t.message:"Error",u=e==null&&t?t.code:e;return L.call(o,a,u,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};var Ea=null;function xr(t){return g.isPlainObject(t)||g.isArray(t)}function qs(t){return g.endsWith(t,"[]")?t.slice(0,-2):t}function Hs(t,e,n){return t?t.concat(e).map(function(s,i){return s=qs(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function Sa(t){return g.isArray(t)&&!t.some(xr)}const Oa=g.toFlatObject(g,{},null,function(e){return/^is[A-Z]/.test(e)});function bn(t,e,n){if(!g.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=g.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,y){return!g.isUndefined(y[h])});const r=n.metaTokens,s=n.visitor||c,i=n.dots,o=n.indexes,u=(n.Blob||typeof Blob!="undefined"&&Blob)&&g.isSpecCompliantForm(e);if(!g.isFunction(s))throw new TypeError("visitor must be a function");function d(p){if(p===null)return"";if(g.isDate(p))return p.toISOString();if(g.isBoolean(p))return p.toString();if(!u&&g.isBlob(p))throw new L("Blob is not supported. Use a Buffer instead.");return g.isArrayBuffer(p)||g.isTypedArray(p)?u&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,h,y){let w=p;if(p&&!y&&typeof p=="object"){if(g.endsWith(h,"{}"))h=r?h:h.slice(0,-2),p=JSON.stringify(p);else if(g.isArray(p)&&Sa(p)||(g.isFileList(p)||g.endsWith(h,"[]"))&&(w=g.toArray(p)))return h=qs(h),w.forEach(function(_,x){!(g.isUndefined(_)||_===null)&&e.append(o===!0?Hs([h],x,i):o===null?h:h+"[]",d(_))}),!1}return xr(p)?!0:(e.append(Hs(y,h,i),d(p)),!1)}const l=[],f=Object.assign(Oa,{defaultVisitor:c,convertValue:d,isVisitable:xr});function m(p,h){if(!g.isUndefined(p)){if(l.indexOf(p)!==-1)throw Error("Circular reference detected in "+h.join("."));l.push(p),g.forEach(p,function(w,b){(!(g.isUndefined(w)||w===null)&&s.call(e,w,g.isString(b)?b.trim():b,h,f))===!0&&m(w,h?h.concat(b):[b])}),l.pop()}}if(!g.isObject(t))throw new TypeError("data must be an object");return m(t),e}function zs(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Er(t,e){this._pairs=[],t&&bn(t,this,e)}const Vs=Er.prototype;Vs.append=function(e,n){this._pairs.push([e,n])},Vs.toString=function(e){const n=e?function(r){return e.call(this,r,zs)}:zs;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Aa(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ws(t,e,n){if(!e)return t;const r=n&&n.encode||Aa;g.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=g.isURLSearchParams(e)?e.toString():new Er(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Js{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){g.forEach(this.handlers,function(r){r!==null&&e(r)})}}var Ys={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ka=typeof URLSearchParams!="undefined"?URLSearchParams:Er,Ca=typeof FormData!="undefined"?FormData:null,Ra=typeof Blob!="undefined"?Blob:null,Ta={isBrowser:!0,classes:{URLSearchParams:ka,FormData:Ca,Blob:Ra},protocols:["http","https","file","blob","url","data"]};const Sr=typeof window!="undefined"&&typeof document!="undefined",Or=typeof navigator=="object"&&navigator||void 0,Pa=Sr&&(!Or||["ReactNative","NativeScript","NS"].indexOf(Or.product)<0),Da=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ia=Sr&&window.location.href||"http://localhost";var ja=Object.freeze({__proto__:null,hasBrowserEnv:Sr,hasStandardBrowserEnv:Pa,hasStandardBrowserWebWorkerEnv:Da,navigator:Or,origin:Ia}),de=q(q({},ja),Ta);function Na(t,e){return bn(t,new de.classes.URLSearchParams,q({visitor:function(n,r,s,i){return de.isNode&&g.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function $a(t){return g.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Fa(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function Gs(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=i>=n.length;return o=!o&&g.isArray(s)?s.length:o,u?(g.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!g.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&g.isArray(s[o])&&(s[o]=Fa(s[o])),!a)}if(g.isFormData(t)&&g.isFunction(t.entries)){const n={};return g.forEachEntry(t,(r,s)=>{e($a(r),s,n,0)}),n}return null}function Ba(t,e,n){if(g.isString(t))try{return(e||JSON.parse)(t),g.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ft={transitional:Ys,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=g.isObject(e);if(i&&g.isHTMLForm(e)&&(e=new FormData(e)),g.isFormData(e))return s?JSON.stringify(Gs(e)):e;if(g.isArrayBuffer(e)||g.isBuffer(e)||g.isStream(e)||g.isFile(e)||g.isBlob(e)||g.isReadableStream(e))return e;if(g.isArrayBufferView(e))return e.buffer;if(g.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Na(e,this.formSerializer).toString();if((a=g.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return bn(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),Ba(e)):e}],transformResponse:[function(e){const n=this.transitional||Ft.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(g.isResponse(e)||g.isReadableStream(e))return e;if(e&&g.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?L.from(a,L.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:de.classes.FormData,Blob:de.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};g.forEach(["delete","get","head","post","put","patch"],t=>{Ft.headers[t]={}});const Ma=g.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Ka=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&Ma[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e};const Xs=Symbol("internals");function Bt(t){return t&&String(t).trim().toLowerCase()}function wn(t){return t===!1||t==null?t:g.isArray(t)?t.map(wn):String(t)}function Ua(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const La=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ar(t,e,n,r,s){if(g.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!g.isString(e)){if(g.isString(r))return e.indexOf(r)!==-1;if(g.isRegExp(r))return r.test(e)}}function qa(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Ha(t,e){const n=g.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let ge=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,u,d){const c=Bt(u);if(!c)throw new Error("header name must be a non-empty string");const l=g.findKey(s,c);(!l||s[l]===void 0||d===!0||d===void 0&&s[l]!==!1)&&(s[l||u]=wn(a))}const o=(a,u)=>g.forEach(a,(d,c)=>i(d,c,u));if(g.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(g.isString(e)&&(e=e.trim())&&!La(e))o(Ka(e),n);else if(g.isObject(e)&&g.isIterable(e)){let a={},u,d;for(const c of e){if(!g.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[d=c[0]]=(u=a[d])?g.isArray(u)?[...u,c[1]]:[u,c[1]]:c[1]}o(a,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Bt(e),e){const r=g.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return Ua(s);if(g.isFunction(n))return n.call(this,s,r);if(g.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Bt(e),e){const r=g.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Ar(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Bt(o),o){const a=g.findKey(r,o);a&&(!n||Ar(r,r[a],a,n))&&(delete r[a],s=!0)}}return g.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Ar(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return g.forEach(this,(s,i)=>{const o=g.findKey(r,i);if(o){n[o]=wn(s),delete n[i];return}const a=e?qa(i):String(i).trim();a!==i&&delete n[i],n[a]=wn(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return g.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&g.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Xs]=this[Xs]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Bt(o);r[a]||(Ha(s,o),r[a]=!0)}return g.isArray(e)?e.forEach(i):i(e),this}};ge.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),g.reduceDescriptors(ge.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}}),g.freezeMethods(ge);function kr(t,e){const n=this||Ft,r=e||n,s=ge.from(r.headers);let i=r.data;return g.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Qs(t){return!!(t&&t.__CANCEL__)}function ht(t,e,n){L.call(this,t==null?"canceled":t,L.ERR_CANCELED,e,n),this.name="CanceledError"}g.inherits(ht,L,{__CANCEL__:!0});function Zs(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new L("Request failed with status code "+n.status,[L.ERR_BAD_REQUEST,L.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function za(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Va(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),c=r[i];o||(o=d),n[s]=u,r[s]=d;let l=i,f=0;for(;l!==s;)f+=n[l++],l=l%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),d-o<e)return;const m=c&&d-c;return m?Math.round(f*1e3/m):void 0}}function Wa(t,e){let n=0,r=1e3/e,s,i;const o=(d,c=Date.now())=>{n=c,s=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const c=Date.now(),l=c-n;l>=r?o(d,c):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},r-l)))},()=>s&&o(s)]}const _n=(t,e,n=3)=>{let r=0;const s=Va(50,250);return Wa(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,u=o-r,d=s(u),c=o<=a;r=o;const l={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:d||void 0,estimated:d&&a&&c?(a-o)/d:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(l)},n)},ei=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},ti=t=>(...e)=>g.asap(()=>t(...e));var Ja=de.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,de.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(de.origin),de.navigator&&/(msie|trident)/i.test(de.navigator.userAgent)):()=>!0,Ya=de.hasStandardBrowserEnv?{write(t,e,n,r,s,i,o){if(typeof document=="undefined")return;const a=[`${t}=${encodeURIComponent(e)}`];g.isNumber(n)&&a.push(`expires=${new Date(n).toUTCString()}`),g.isString(r)&&a.push(`path=${r}`),g.isString(s)&&a.push(`domain=${s}`),i===!0&&a.push("secure"),g.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document=="undefined")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ga(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Xa(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ni(t,e,n){let r=!Ga(e);return t&&(r||n==!1)?Xa(t,e):e}const ri=t=>t instanceof ge?q({},t):t;function Ye(t,e){e=e||{};const n={};function r(d,c,l,f){return g.isPlainObject(d)&&g.isPlainObject(c)?g.merge.call({caseless:f},d,c):g.isPlainObject(c)?g.merge({},c):g.isArray(c)?c.slice():c}function s(d,c,l,f){if(g.isUndefined(c)){if(!g.isUndefined(d))return r(void 0,d,l,f)}else return r(d,c,l,f)}function i(d,c){if(!g.isUndefined(c))return r(void 0,c)}function o(d,c){if(g.isUndefined(c)){if(!g.isUndefined(d))return r(void 0,d)}else return r(void 0,c)}function a(d,c,l){if(l in e)return r(d,c);if(l in t)return r(void 0,d)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(d,c,l)=>s(ri(d),ri(c),l,!0)};return g.forEach(Object.keys(q(q({},t),e)),function(c){const l=u[c]||s,f=l(t[c],e[c],c);g.isUndefined(f)&&l!==a||(n[c]=f)}),n}var si=t=>{const e=Ye({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;if(e.headers=o=ge.from(o),e.url=Ws(ni(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),g.isFormData(n)){if(de.hasStandardBrowserEnv||de.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(g.isFunction(n.getHeaders)){const u=n.getHeaders(),d=["content-type","content-length"];Object.entries(u).forEach(([c,l])=>{d.includes(c.toLowerCase())&&o.set(c,l)})}}if(de.hasStandardBrowserEnv&&(r&&g.isFunction(r)&&(r=r(e)),r||r!==!1&&Ja(e.url))){const u=s&&i&&Ya.read(i);u&&o.set(s,u)}return e},Qa=typeof XMLHttpRequest!="undefined"&&function(t){return new Promise(function(n,r){const s=si(t);let i=s.data;const o=ge.from(s.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:d}=s,c,l,f,m,p;function h(){m&&m(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(c),s.signal&&s.signal.removeEventListener("abort",c)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function w(){if(!y)return;const _=ge.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),O={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:_,config:t,request:y};Zs(function(v){n(v),h()},function(v){r(v),h()},O),y=null}"onloadend"in y?y.onloadend=w:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(w)},y.onabort=function(){y&&(r(new L("Request aborted",L.ECONNABORTED,t,y)),y=null)},y.onerror=function(x){const O=x&&x.message?x.message:"Network Error",S=new L(O,L.ERR_NETWORK,t,y);S.event=x||null,r(S),y=null},y.ontimeout=function(){let x=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const O=s.transitional||Ys;s.timeoutErrorMessage&&(x=s.timeoutErrorMessage),r(new L(x,O.clarifyTimeoutError?L.ETIMEDOUT:L.ECONNABORTED,t,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&g.forEach(o.toJSON(),function(x,O){y.setRequestHeader(O,x)}),g.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),a&&a!=="json"&&(y.responseType=s.responseType),d&&([f,p]=_n(d,!0),y.addEventListener("progress",f)),u&&y.upload&&([l,m]=_n(u),y.upload.addEventListener("progress",l),y.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(c=_=>{y&&(r(!_||_.type?new ht(null,t,y):_),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(c),s.signal&&(s.signal.aborted?c():s.signal.addEventListener("abort",c)));const b=za(s.url);if(b&&de.protocols.indexOf(b)===-1){r(new L("Unsupported protocol "+b+":",L.ERR_BAD_REQUEST,t));return}y.send(i||null)})};const Za=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(d){if(!s){s=!0,a();const c=d instanceof Error?d:this.reason;r.abort(c instanceof L?c:new ht(c instanceof Error?c.message:c))}};let o=e&&setTimeout(()=>{o=null,i(new L(`timeout ${e} of ms exceeded`,L.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:u}=r;return u.unsubscribe=()=>g.asap(a),u}},ec=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},tc=function(t,e){return Ur(this,null,function*(){try{for(var n=Vi(nc(t)),r,s,i;r=!(s=yield new nt(n.next())).done;r=!1){const o=s.value;yield*Lr(ec(o,e))}}catch(s){i=[s]}finally{try{r&&(s=n.return)&&(yield new nt(s.call(n)))}finally{if(i)throw i[0]}}})},nc=function(t){return Ur(this,null,function*(){if(t[Symbol.asyncIterator]){yield*Lr(t);return}const e=t.getReader();try{for(;;){const{done:n,value:r}=yield new nt(e.read());if(n)break;yield r}}finally{yield new nt(e.cancel())}})},ii=(t,e,n,r)=>{const s=tc(t,e);let i=0,o,a=d=>{o||(o=!0,r&&r(d))};return new ReadableStream({pull(d){return J(this,null,function*(){try{const{done:c,value:l}=yield s.next();if(c){a(),d.close();return}let f=l.byteLength;if(n){let m=i+=f;n(m)}d.enqueue(new Uint8Array(l))}catch(c){throw a(c),c}})},cancel(d){return a(d),s.return()}},{highWaterMark:2})},oi=64*1024,{isFunction:vn}=g,rc=(({Request:t,Response:e})=>({Request:t,Response:e}))(g.global),{ReadableStream:ai,TextEncoder:ci}=g.global,ui=(t,...e)=>{try{return!!t(...e)}catch(n){return!1}},sc=t=>{t=g.merge.call({skipUndefined:!0},rc,t);const{fetch:e,Request:n,Response:r}=t,s=e?vn(e):typeof fetch=="function",i=vn(n),o=vn(r);if(!s)return!1;const a=s&&vn(ai),u=s&&(typeof ci=="function"?(p=>h=>p.encode(h))(new ci):p=>J(this,null,function*(){return new Uint8Array(yield new n(p).arrayBuffer())})),d=i&&a&&ui(()=>{let p=!1;const h=new n(de.origin,{body:new ai,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!h}),c=o&&a&&ui(()=>g.isReadableStream(new r("").body)),l={stream:c&&(p=>p.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!l[p]&&(l[p]=(h,y)=>{let w=h&&h[p];if(w)return w.call(h);throw new L(`Response type '${p}' is not supported`,L.ERR_NOT_SUPPORT,y)})});const f=p=>J(this,null,function*(){if(p==null)return 0;if(g.isBlob(p))return p.size;if(g.isSpecCompliantForm(p))return(yield new n(de.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(g.isArrayBufferView(p)||g.isArrayBuffer(p))return p.byteLength;if(g.isURLSearchParams(p)&&(p=p+""),g.isString(p))return(yield u(p)).byteLength}),m=(p,h)=>J(this,null,function*(){const y=g.toFiniteNumber(p.getContentLength());return y==null?f(h):y});return p=>J(this,null,function*(){let{url:h,method:y,data:w,signal:b,cancelToken:_,timeout:x,onDownloadProgress:O,onUploadProgress:S,responseType:v,headers:B,withCredentials:k="same-origin",fetchOptions:M}=si(p),D=e||fetch;v=v?(v+"").toLowerCase():"text";let ee=Za([b,_&&_.toAbortSignal()],x),te=null;const C=ee&&ee.unsubscribe&&(()=>{ee.unsubscribe()});let R;try{if(S&&d&&y!=="get"&&y!=="head"&&(R=yield m(B,w))!==0){let V=new n(h,{method:"POST",body:w,duplex:"half"}),Y;if(g.isFormData(w)&&(Y=V.headers.get("content-type"))&&B.setContentType(Y),V.body){const[ie,ae]=ei(R,_n(ti(S)));w=ii(V.body,oi,ie,ae)}}g.isString(k)||(k=k?"include":"omit");const E=i&&"credentials"in n.prototype,T=Z(q({},M),{signal:ee,method:y.toUpperCase(),headers:B.normalize().toJSON(),body:w,duplex:"half",credentials:E?k:void 0});te=i&&new n(h,T);let A=yield i?D(te,M):D(h,T);const j=c&&(v==="stream"||v==="response");if(c&&(O||j&&C)){const V={};["status","statusText","headers"].forEach(me=>{V[me]=A[me]});const Y=g.toFiniteNumber(A.headers.get("content-length")),[ie,ae]=O&&ei(Y,_n(ti(O),!0))||[];A=new r(ii(A.body,oi,ie,()=>{ae&&ae(),C&&C()}),V)}v=v||"text";let $=yield l[g.findKey(l,v)||"text"](A,p);return!j&&C&&C(),yield new Promise((V,Y)=>{Zs(V,Y,{data:$,headers:ge.from(A.headers),status:A.status,statusText:A.statusText,config:p,request:te})})}catch(E){throw C&&C(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new L("Network Error",L.ERR_NETWORK,p,te),{cause:E.cause||E}):L.from(E,E&&E.code,p,te)}})},ic=new Map,li=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,a=o,u,d,c=ic;for(;a--;)u=i[a],d=c.get(u),d===void 0&&c.set(u,d=a?new Map:sc(e)),c=d;return d};li();const Cr={http:Ea,xhr:Qa,fetch:{get:li}};g.forEach(Cr,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(n){}Object.defineProperty(t,"adapterName",{value:e})}});const di=t=>`- ${t}`,oc=t=>g.isFunction(t)||t===null||t===!1;function ac(t,e){t=g.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let a;if(s=r,!oc(r)&&(s=Cr[(a=String(r)).toLowerCase()],s===void 0))throw new L(`Unknown adapter '${a}'`);if(s&&(g.isFunction(s)||(s=s.get(e))))break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map(di).join(`
`):" "+di(o[0]):"as no adapter specified";throw new L("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s}var fi={getAdapter:ac,adapters:Cr};function Rr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ht(null,t)}function hi(t){return Rr(t),t.headers=ge.from(t.headers),t.data=kr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),fi.getAdapter(t.adapter||Ft.adapter,t)(t).then(function(r){return Rr(t),r.data=kr.call(t,t.transformResponse,r),r.headers=ge.from(r.headers),r},function(r){return Qs(r)||(Rr(t),r&&r.response&&(r.response.data=kr.call(t,t.transformResponse,r.response),r.response.headers=ge.from(r.response.headers))),Promise.reject(r)})}const pi="1.13.2",xn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{xn[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const mi={};xn.transitional=function(e,n,r){function s(i,o){return"[Axios v"+pi+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new L(s(o," has been removed"+(n?" in "+n:"")),L.ERR_DEPRECATED);return n&&!mi[o]&&(mi[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}},xn.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function cc(t,e,n){if(typeof t!="object")throw new L("options must be an object",L.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],u=a===void 0||o(a,i,t);if(u!==!0)throw new L("option "+i+" must be "+u,L.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new L("Unknown option "+i,L.ERR_BAD_OPTION)}}var En={assertOptions:cc,validators:xn};const Se=En.validators;let Ge=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Js,response:new Js}}request(e,n){return J(this,null,function*(){try{return yield this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch(o){}}throw r}})}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ye(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&En.assertOptions(r,{silentJSONParsing:Se.transitional(Se.boolean),forcedJSONParsing:Se.transitional(Se.boolean),clarifyTimeoutError:Se.transitional(Se.boolean)},!1),s!=null&&(g.isFunction(s)?n.paramsSerializer={serialize:s}:En.assertOptions(s,{encode:Se.function,serialize:Se.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),En.assertOptions(n,{baseUrl:Se.spelling("baseURL"),withXsrfToken:Se.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&g.merge(i.common,i[n.method]);i&&g.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=ge.concat(o,i);const a=[];let u=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(n)===!1||(u=u&&h.synchronous,a.unshift(h.fulfilled,h.rejected))});const d=[];this.interceptors.response.forEach(function(h){d.push(h.fulfilled,h.rejected)});let c,l=0,f;if(!u){const p=[hi.bind(this),void 0];for(p.unshift(...a),p.push(...d),f=p.length,c=Promise.resolve(n);l<f;)c=c.then(p[l++],p[l++]);return c}f=a.length;let m=n;for(;l<f;){const p=a[l++],h=a[l++];try{m=p(m)}catch(y){h.call(this,y);break}}try{c=hi.call(this,m)}catch(p){return Promise.reject(p)}for(l=0,f=d.length;l<f;)c=c.then(d[l++],d[l++]);return c}getUri(e){e=Ye(this.defaults,e);const n=ni(e.baseURL,e.url,e.allowAbsoluteUrls);return Ws(n,e.params,e.paramsSerializer)}};g.forEach(["delete","get","head","options"],function(e){Ge.prototype[e]=function(n,r){return this.request(Ye(r||{},{method:e,url:n,data:(r||{}).data}))}}),g.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Ye(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Ge.prototype[e]=n(),Ge.prototype[e+"Form"]=n(!0)});let uc=class Wi{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new ht(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Wi(function(s){e=s}),cancel:e}}};function lc(t){return function(n){return t.apply(null,n)}}function dc(t){return g.isObject(t)&&t.isAxiosError===!0}const Tr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Tr).forEach(([t,e])=>{Tr[e]=t});function yi(t){const e=new Ge(t),n=Ds(Ge.prototype.request,e);return g.extend(n,Ge.prototype,e,{allOwnKeys:!0}),g.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return yi(Ye(t,s))},n}const oe=yi(Ft);oe.Axios=Ge,oe.CanceledError=ht,oe.CancelToken=uc,oe.isCancel=Qs,oe.VERSION=pi,oe.toFormData=bn,oe.AxiosError=L,oe.Cancel=oe.CanceledError,oe.all=function(e){return Promise.all(e)},oe.spread=lc,oe.isAxiosError=dc,oe.mergeConfig=Ye,oe.AxiosHeaders=ge,oe.formToJSON=t=>Gs(g.isHTMLForm(t)?new FormData(t):t),oe.getAdapter=fi.getAdapter,oe.HttpStatusCode=Tr,oe.default=oe;const{Axios:Nu,AxiosError:$u,CanceledError:Fu,isCancel:Bu,CancelToken:Mu,VERSION:Ku,all:Uu,Cancel:Lu,isAxiosError:qu,spread:Hu,toFormData:zu,AxiosHeaders:Vu,HttpStatusCode:Wu,formToJSON:Ju,getAdapter:Yu,mergeConfig:Gu}=oe;var fc="Expected a function",gi="__lodash_hash_undefined__",hc="[object Function]",pc="[object GeneratorFunction]",mc="[object Symbol]",yc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gc=/^\w*$/,bc=/^\./,wc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_c=/[\\^$.*+?()[\]{}|]/g,vc=/\\(\\)?/g,xc=/^\[object .+?Constructor\]$/,Ec=typeof F=="object"&&F&&F.Object===Object&&F,Sc=typeof self=="object"&&self&&self.Object===Object&&self,Pr=Ec||Sc||Function("return this")();function Oc(t,e){return t==null?void 0:t[e]}function Ac(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch(n){}return e}var kc=Array.prototype,Cc=Function.prototype,bi=Object.prototype,Dr=Pr["__core-js_shared__"],wi=function(){var t=/[^.]+$/.exec(Dr&&Dr.keys&&Dr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),_i=Cc.toString,Ir=bi.hasOwnProperty,vi=bi.toString,Rc=RegExp("^"+_i.call(Ir).replace(_c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xi=Pr.Symbol,Tc=kc.splice,Pc=Oi(Pr,"Map"),Mt=Oi(Object,"create"),Ei=xi?xi.prototype:void 0,Si=Ei?Ei.toString:void 0;function Xe(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Dc(){this.__data__=Mt?Mt(null):{}}function Ic(t){return this.has(t)&&delete this.__data__[t]}function jc(t){var e=this.__data__;if(Mt){var n=e[t];return n===gi?void 0:n}return Ir.call(e,t)?e[t]:void 0}function Nc(t){var e=this.__data__;return Mt?e[t]!==void 0:Ir.call(e,t)}function $c(t,e){var n=this.__data__;return n[t]=Mt&&e===void 0?gi:e,this}Xe.prototype.clear=Dc,Xe.prototype.delete=Ic,Xe.prototype.get=jc,Xe.prototype.has=Nc,Xe.prototype.set=$c;function pt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Fc(){this.__data__=[]}function Bc(t){var e=this.__data__,n=Sn(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Tc.call(e,n,1),!0}function Mc(t){var e=this.__data__,n=Sn(e,t);return n<0?void 0:e[n][1]}function Kc(t){return Sn(this.__data__,t)>-1}function Uc(t,e){var n=this.__data__,r=Sn(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}pt.prototype.clear=Fc,pt.prototype.delete=Bc,pt.prototype.get=Mc,pt.prototype.has=Kc,pt.prototype.set=Uc;function Qe(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Lc(){this.__data__={hash:new Xe,map:new(Pc||pt),string:new Xe}}function qc(t){return On(this,t).delete(t)}function Hc(t){return On(this,t).get(t)}function zc(t){return On(this,t).has(t)}function Vc(t,e){return On(this,t).set(t,e),this}Qe.prototype.clear=Lc,Qe.prototype.delete=qc,Qe.prototype.get=Hc,Qe.prototype.has=zc,Qe.prototype.set=Vc;function Sn(t,e){for(var n=t.length;n--;)if(ru(t[n][0],e))return n;return-1}function Wc(t,e){e=Xc(e,t)?[e]:Gc(e);for(var n=0,r=e.length;t!=null&&n<r;)t=t[tu(e[n++])];return n&&n==r?t:void 0}function Jc(t){if(!ki(t)||Zc(t))return!1;var e=su(t)||Ac(t)?Rc:xc;return e.test(nu(t))}function Yc(t){if(typeof t=="string")return t;if(Nr(t))return Si?Si.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Gc(t){return Ai(t)?t:eu(t)}function On(t,e){var n=t.__data__;return Qc(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Oi(t,e){var n=Oc(t,e);return Jc(n)?n:void 0}function Xc(t,e){if(Ai(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Nr(t)?!0:gc.test(t)||!yc.test(t)||e!=null&&t in Object(e)}function Qc(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Zc(t){return!!wi&&wi in t}var eu=jr(function(t){t=ou(t);var e=[];return bc.test(t)&&e.push(""),t.replace(wc,function(n,r,s,i){e.push(s?i.replace(vc,"$1"):r||n)}),e});function tu(t){if(typeof t=="string"||Nr(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function nu(t){if(t!=null){try{return _i.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function jr(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(fc);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,r);return n.cache=i.set(s,o),o};return n.cache=new(jr.Cache||Qe),n}jr.Cache=Qe;function ru(t,e){return t===e||t!==t&&e!==e}var Ai=Array.isArray;function su(t){var e=ki(t)?vi.call(t):"";return e==hc||e==pc}function ki(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function iu(t){return!!t&&typeof t=="object"}function Nr(t){return typeof t=="symbol"||iu(t)&&vi.call(t)==mc}function ou(t){return t==null?"":Yc(t)}function au(t,e,n){var r=t==null?void 0:Wc(t,e);return r===void 0?n:r}var cu=au,Ci=K(cu);const Ri=t=>typeof t=="object"&&t!==null,Ti=t=>Ri(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date),uu=Symbol("mapObjectSkip"),$r=(t,e,n,r=new WeakMap)=>{if(n=q({deep:!1,target:{}},n),r.has(t))return r.get(t);r.set(t,n.target);const{target:s}=n;delete n.target;const i=o=>o.map(a=>Ti(a)?$r(a,e,n,r):a);if(Array.isArray(t))return i(t);for(const[o,a]of Object.entries(t)){const u=e(o,a,t);if(u===uu)continue;let[d,c,{shouldRecurse:l=!0}={}]=u;d!=="__proto__"&&(n.deep&&l&&Ti(c)&&(c=Array.isArray(c)?i(c):$r(c,e,n,r)),s[d]=c)}return s};function Pi(t,e,n){if(!Ri(t))throw new TypeError(`Expected an object, got \`${t}\` (${typeof t})`);return $r(t,e,n)}const lu=/[\p{Lu}]/u,du=/[\p{Ll}]/u,Di=/^[\p{Lu}](?![\p{Lu}])/gu,Ii=/([\p{Alpha}\p{N}_]|$)/u,Fr=/[_.\- ]+/,fu=new RegExp("^"+Fr.source),ji=new RegExp(Fr.source+Ii.source,"gu"),Ni=new RegExp("\\d+"+Ii.source,"gu"),hu=(t,e,n,r)=>{let s=!1,i=!1,o=!1,a=!1;for(let u=0;u<t.length;u++){const d=t[u];a=u>2?t[u-3]==="-":!0,s&&lu.test(d)?(t=t.slice(0,u)+"-"+t.slice(u),s=!1,o=i,i=!0,u++):i&&o&&du.test(d)&&(!a||r)?(t=t.slice(0,u-1)+"-"+t.slice(u-1),o=i,i=!1,s=!0):(s=e(d)===d&&n(d)!==d,o=i,i=n(d)===d&&e(d)!==d)}return t},pu=(t,e)=>(Di.lastIndex=0,t.replaceAll(Di,n=>e(n))),mu=(t,e)=>(ji.lastIndex=0,Ni.lastIndex=0,t.replaceAll(Ni,(n,r,s)=>["_","-"].includes(t.charAt(s+n.length))?n:e(n)).replaceAll(ji,(n,r)=>e(r)));function yu(t,e){if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e=q({pascalCase:!1,preserveConsecutiveUppercase:!1},e),Array.isArray(t)?t=t.map(i=>i.trim()).filter(i=>i.length).join("-"):t=t.trim(),t.length===0)return"";const n=e.locale===!1?i=>i.toLowerCase():i=>i.toLocaleLowerCase(e.locale),r=e.locale===!1?i=>i.toUpperCase():i=>i.toLocaleUpperCase(e.locale);return t.length===1?Fr.test(t)?"":e.pascalCase?r(t):n(t):(t!==n(t)&&(t=hu(t,n,r,e.preserveConsecutiveUppercase)),t=t.replace(fu,""),t=e.preserveConsecutiveUppercase?pu(t,n):n(t),e.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),mu(t,r))}class gu extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[n,r]of e)this.onEviction(n,r.value)}_deleteIfExpired(e,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,n.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,n){if(this._deleteIfExpired(e,n)===!1)return n.value}_getItemValue(e,n){return n.expiry?this._getOrDeleteIfExpired(e,n):n.value}_peek(e,n){const r=n.get(e);return this._getItemValue(e,r)}_set(e,n){this.cache.set(e,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,n){this.oldCache.delete(e),this._set(e,n)}*_entriesAscending(){for(const e of this.oldCache){const[n,r]=e;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield e)}for(const e of this.cache){const[n,r]=e;this._deleteIfExpired(n,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const n=this.cache.get(e);return this._getItemValue(e,n)}if(this.oldCache.has(e)){const n=this.oldCache.get(e);if(this._deleteIfExpired(e,n)===!1)return this._moveToRecent(e,n),n.value}}set(e,n,{maxAge:r=this.maxAge}={}){const s=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(e)?this.cache.set(e,{value:n,expiry:s}):this._set(e,{value:n,expiry:s}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const n=this.cache.delete(e);return n&&this._size--,this.oldCache.delete(e)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],r=n.length-e;r<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(r>0&&this._emitEvictions(n.slice(0,r)),this.oldCache=new Map(n.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[n,r]=e;this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}for(const e of this.oldCache){const[n,r]=e;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}}*entriesDescending(){let e=[...this.cache];for(let n=e.length-1;n>=0;--n){const r=e[n],[s,i]=r;this._deleteIfExpired(s,i)===!1&&(yield[s,i.value])}e=[...this.oldCache];for(let n=e.length-1;n>=0;--n){const r=e[n],[s,i]=r;this.cache.has(s)||this._deleteIfExpired(s,i)===!1&&(yield[s,i.value])}}*entriesAscending(){for(const[e,n]of this._entriesAscending())yield[e,n.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const n of this.oldCache.keys())this.cache.has(n)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,n=this){for(const[r,s]of this.entriesAscending())e.call(n,s,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}const bu=(t,e)=>t.some(n=>typeof n=="string"?n===e:(n.lastIndex=0,n.test(e))),Br=new gu({maxSize:1e5}),$i=t=>typeof t=="object"&&t!==null&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date),Fi=(t,e={})=>{if(!$i(t))return t;const{exclude:n,pascalCase:r=!1,stopPaths:s,deep:i=!1,preserveConsecutiveUppercase:o=!1}=e,a=new Set(s),u=d=>(c,l)=>{if(i&&$i(l)){const f=d===void 0?c:`${d}.${c}`;a.has(f)||(l=Pi(l,u(f)))}if(!(n&&bu(n,c))){const f=r?`${c}_`:c;if(Br.has(f))c=Br.get(f);else{const m=yu(c,{pascalCase:r,locale:!1,preserveConsecutiveUppercase:o});c.length<100&&Br.set(f,m),c=m}}return[c,l]};return Pi(t,u(void 0))};function wu(t,e){return Array.isArray(t)?Object.keys(t).map(n=>Fi(t[n],e)):Fi(t,e)}const Mr=oe.create({baseURL:"https://odoo.areum.cl"});Mr.interceptors.response.use(function(t){return J(this,null,function*(){var e;if(t.data.error){(t.data.error.code===100||t.data.error.message==="Odoo Session Expired"||((e=t.data.error.data)==null?void 0:e.name)==="odoo.http.SessionExpiredException")&&(console.warn("Session expired, clearing token"),yield Ou.deleteAuth());const n=Ci(t,"data.error.data.message","Request error");throw new Error(`${n} (${t.config.url})`)}return wu(Ci(t,"data.result",{}),{deep:!0})})},function(t){var e,n;throw(n=(e=t.response)==null?void 0:e.data)!=null&&n.includes("odoo.http.SessionExpiredException")?new Error("Unauthorized error"):new Error("Uncaught error")});const Bi={call(t,e,n,r){return r&&(r.context=q({},r.context)),Mr.post(`/web/dataset/call_kw/${t}/${e}`,{jsonrpc:"2.0",method:"call",params:{model:t,method:e,args:n,kwargs:r},id:Math.floor(Math.random()*1e3*1e3*1e3)})},searchRead(n){var r=n,{model:t}=r,e=zi(r,["model"]);return this.call(t,"search_read",[],Object.assign({},{fields:[],domain:[],order:"",context:{}},e))},read(t){const{model:e,ids:n,kwargs:r,fields:s}=Object.assign({},{fields:[],kwargs:{}},t);return this.call(e,"read",[n,s],r)},callButton(t,e,n,r){return Mr.post("/web/dataset/call_button",{jsonrpc:"2.0",method:"call",params:{model:t,method:e,args:n,kwargs:r},id:Math.floor(Math.random()*1e3*1e3*1e3)})}},An={currentTableNames(){return J(this,null,function*(){return yield re.open(),re.tables.map(({name:t})=>t)})},getByTableName(t){return J(this,null,function*(){try{return re.table(t).toArray()}catch(e){return null}})},bulkUpdateTable(t,e){return J(this,null,function*(){if(!vu(t))throw new Error("could not get schema indexes");return re.table(t).bulkPut(e)})}},Ze=(t,e,n,r=i=>i,s)=>J(this,null,function*(){let i;const o=()=>Bi.searchRead({model:t,fields:e.length>0?[...e,"write_date"]:e,domain:n}).then(r).catch(d=>{throw console.error(`Error fetching model: ${t}`,d),d}),a=()=>J(this,null,function*(){const d=yield o(),l=(yield An.getByTableName(t)).reduce((m,p)=>Z(q({},m),{[p.id]:p.writeDate}),{});d.filter(m=>l[m.id]!==m.writeDate).length>0&&(yield An.bulkUpdateTable(t,d))});if(s!=null&&s.nocache||(i=yield An.getByTableName(t)),i&&i.length>0)return a(),i;const u=yield o();return yield An.bulkUpdateTable(t,u),u}),_u=[{model:"pos.config",fields:[],load(){return J(this,null,function*(){return Ze(this.model,this.fields,[],t=>t,{nocache:!0})})}},{model:"pos.session",fields:["id","name","user_id","config_id","start_at","stop_at","state","sequence_number","payment_method_ids","login_number"],load(){return J(this,null,function*(){return Ze(this.model,this.fields,[["state","in",["opened","opening_control"]],["rescue","=",!1]],t=>t.map(e=>Z(q({},e),{posConfigId:e.configId?e.configId[0]:null,responsibleUserId:e.userId?e.userId[0]:null})),{nocache:!0})})},indexes:"++id, name"},{model:"res.company",fields:["currency_id","email","website","company_registry","vat","name","phone","street","logo","partner_id","country_id","state_id","tax_calculation_rounding_method"]},{model:"decimal.precision",fields:["name","digits"]},{model:"pos.printer",fields:["name","proxy_ip","product_categories_ids","printer_type","network_printer_ip"]},{model:"res.partner",indexes:"++id, phone, name",fields:["name","street","city","vat","phone","mobile","email","barcode","comment","property_account_position_id","property_product_pricelist"]},{model:"uom.uom",fields:[]},{model:"account.tax",fields:["name","amount","price_include","include_base_amount","amount_type","children_tax_ids","sequence"],load(){return J(this,null,function*(){return Ze(this.model,this.fields,[],t=>J(this,null,function*(){const e=t.map(r=>r.id),n=yield Bi.call("account.tax","get_real_tax_amount",[e],{});if(Array.isArray(n)){const r=n.reduce((s,i)=>Z(q({},s),{[i.id]:i.amount}),{});return t.map(s=>Z(q({},s),{realTaxAmount:r[s.id]}))}return t}))})}},{model:"res.users",fields:["name","company_id","id","groups_id"]},{model:"product.pricelist",fields:["name","display_name","discount_policy"]},{model:"product.pricelist.item",fields:[],indexes:"++id, pricelistIdInt, pricelistId",load(){return J(this,null,function*(){return Ze(this.model,this.fields,void 0,t=>t.map(e=>Z(q({},e),{pricelistIdInt:e.pricelistId?e.pricelistId[0]:null})))})}},{model:"res.currency",fields:["name","symbol","position","rounding","rate"]},{model:"pos.category",fields:["id","name","parent_id","child_id"]},{model:"product.template",fields:["name","description","type","lst_price","list_price","sequence","product_variant_ids","product_variant_id","barcode","default_code","pos_categ_id","image_128"],indexes:"++id, posCategoryId",load(){return J(this,null,function*(){return Ze(this.model,this.fields,["&",["sale_ok","=",!0],["available_in_pos","=",!0]],t=>t.map(e=>Z(q({},e),{posCategoryId:e.posCategId?e.posCategId[0]:null})))})}},{model:"product.product",fields:["name","display_name","lst_price","standard_price","categ_id","pos_categ_id","taxes_id","barcode","default_code","to_weight","uom_id","description_sale","description","product_tmpl_id","tracking","sequence","image_128"],indexes:"++id, productTemplateId,barcode",load(){return J(this,null,function*(){return Ze(this.model,this.fields,["&",["sale_ok","=",!0],["available_in_pos","=",!0]],t=>t.map(e=>Z(q({},e),{productTemplateId:e.productTmplId?e.productTmplId[0]:null})))})}},{model:"pos.payment.method",fields:["name","is_cash_count","use_payment_terminal"]},{model:"account.fiscal.position",fields:[]},{model:"account.fiscal.position.tax",fields:[]},{model:"hr.employee",fields:["name","id","user_id"]}].map(t=>Z(q({},t),{load:typeof t.load=="function"?t.load:()=>Ze(t.model,t.fields),indexes:t.indexes?t.indexes:"++id"})),Mi=()=>_u.reduce((t,e)=>Z(q({},t),{[e.model]:e.indexes}),{"auth.user.metas":"++id,name,dbName,username","pos.order":"id","pos.order.line":"++id,orderId","pos.order.snapshot":"id",preference:"id"}),vu=t=>Mi()[t],xu="simpos_db",Eu=2;function Su(){const t=new Ve(xu);return t.version(Eu).stores(Mi()),t}const re=Su(),Ou={db:re.table("auth.user.metas"),create(t){return J(this,null,function*(){yield this.db.add(t)})},first(){return J(this,null,function*(){return this.db.limit(1).first()})},clear(){return J(this,null,function*(){return re.delete()})},update(t){return J(this,null,function*(){const e=yield this.first();if(!e)throw new Error("No metadata found");return this.db.update(e.id,t)})},deleteAuth(){return J(this,null,function*(){return this.db.clear()})}};re.table("pos.category");const Kr={db:re.table("product.product"),all(){return J(this,null,function*(){return this.db.toArray()})},findById(t){return J(this,null,function*(){return this.db.get(t)})},update(t,e){return this.db.update(t,e)},findByTemplateIds(t){return this.db.where("productTemplateId").anyOf(t).toArray()},findByBarcode(t){return this.db.where("barcode").equalsIgnoreCase(t).first()}};re.table("product.template"),re.table("pos.session"),re.table("res.currency"),re.table("res.company"),re.table("pos.config"),re.table("product.pricelist.item"),re.table("decimal.precision");var Au={};(function(t){(function(){var e={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(a){return s(o(a),arguments)}function r(a,u){return n.apply(null,[a].concat(u||[]))}function s(a,u){var d=1,c=a.length,l,f="",m,p,h,y,w,b,_,x;for(m=0;m<c;m++)if(typeof a[m]=="string")f+=a[m];else if(typeof a[m]=="object"){if(h=a[m],h.keys)for(l=u[d],p=0;p<h.keys.length;p++){if(l==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',h.keys[p],h.keys[p-1]));l=l[h.keys[p]]}else h.param_no?l=u[h.param_no]:l=u[d++];if(e.not_type.test(h.type)&&e.not_primitive.test(h.type)&&l instanceof Function&&(l=l()),e.numeric_arg.test(h.type)&&typeof l!="number"&&isNaN(l))throw new TypeError(n("[sprintf] expecting number but found %T",l));switch(e.number.test(h.type)&&(_=l>=0),h.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,h.width?parseInt(h.width):0);break;case"e":l=h.precision?parseFloat(l).toExponential(h.precision):parseFloat(l).toExponential();break;case"f":l=h.precision?parseFloat(l).toFixed(h.precision):parseFloat(l);break;case"g":l=h.precision?String(Number(l.toPrecision(h.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=h.precision?l.substring(0,h.precision):l;break;case"t":l=String(!!l),l=h.precision?l.substring(0,h.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=h.precision?l.substring(0,h.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=h.precision?l.substring(0,h.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase();break}e.json.test(h.type)?f+=l:(e.number.test(h.type)&&(!_||h.sign)?(x=_?"+":"-",l=l.toString().replace(e.sign,"")):x="",w=h.pad_char?h.pad_char==="0"?"0":h.pad_char.charAt(1):" ",b=h.width-(x+l).length,y=h.width&&b>0?w.repeat(b):"",f+=h.align?x+l+y:w==="0"?x+y+l:y+x+l)}return f}var i=Object.create(null);function o(a){if(i[a])return i[a];for(var u=a,d,c=[],l=0;u;){if((d=e.text.exec(u))!==null)c.push(d[0]);else if((d=e.modulo.exec(u))!==null)c.push("%");else if((d=e.placeholder.exec(u))!==null){if(d[2]){l|=1;var f=[],m=d[2],p=[];if((p=e.key.exec(m))!==null)for(f.push(p[1]);(m=m.substring(p[0].length))!=="";)if((p=e.key_access.exec(m))!==null)f.push(p[1]);else if((p=e.index_access.exec(m))!==null)f.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");d[2]=f}else l|=2;if(l===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:d[0],param_no:d[1],keys:d[2],sign:d[3],pad_char:d[4],align:d[5],width:d[6],precision:d[7],type:d[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");u=u.substring(d[0].length)}return i[a]=c}t.sprintf=n,t.vsprintf=r,typeof window!="undefined"&&(window.sprintf=n,window.vsprintf=r)})()})(Au),re.table("res.partner"),re.table("product.pricelist"),re.table("pos.order.line"),re.table("pos.order"),re.table("account.tax"),re.table("uom.uom"),re.table("pos.payment.method");const Ki={db:re.table("preference"),update(t){return J(this,null,function*(){return this.db.put(q({id:"preference"},t))})},get(){return this.db.toCollection().first()}},ku="https://odoo.areum.cl",Cu=[128],kn=10,Ui=t=>J(this,null,function*(){const e=yield Ki.get();if(e&&e.lastImagesDownloaded&&ce().diff(ce(e.lastImagesDownloaded),"hour")<24)return null;const n=t.map(({id:s})=>s),r=Math.ceil(n.length/kn);for(let s=0;s<r;s+=1){const i=n.slice(s*kn,s*kn+kn),o=yield Promise.all(i.map(a=>J(this,null,function*(){const u=yield Promise.all(Cu.map(d=>J(this,null,function*(){try{const c=yield fetch(`${ku}/web/image?model=product.product&field=image_${d}&id=${a}`);if(c.status!==200)return{size:d,blob:void 0};const l=yield c.blob();return{size:d,blob:l}}catch(c){return console.error("Error fetching image:",c),{size:d,blob:void 0}}})));return{id:a,images:u.reduce((d,c)=>Z(q({},d),{[c.size]:c.blob}),{})}})));yield Promise.all(o.map(a=>J(this,null,function*(){return Kr.update(a.id,{images:a.images})})))}yield Ki.update({lastImagesDownloaded:new Date}),postMessage({type:"PRODUCT_IMAGES_SAVED"})});onmessage=function(t){J(this,null,function*(){switch(t.data.type){case"DATA_INITIALIZED":{const e=yield Kr.all();Ui(e).catch(n=>console.error("Failed to download product images",n));break}case"ACTIVE_ORDER_CHANGED":{se.postMessage({type:"ACTIVE_ORDER_CHANGED",payload:t.data.payload});break}case"PRODUCT_TEMPLATE_CHANGED":{if(Array.isArray(t.data.payload)&&t.data.payload.length>0){const e=t.data.payload.map(({id:r})=>r),n=yield Kr.findByTemplateIds(e);n.length>0&&Ui(n).catch(r=>console.error("Failed to download product images",r))}break}}}).catch(e=>{console.error("Worker error:",e)})}})();
